var _jQueryGS,eventSource;$gs=function(a){return document.getElementById(a)};var GSConstant=new function(){},GSCommon=new function(){this.isIE=navigator.appName=="Microsoft Internet Explorer"&&navigator.userAgent.indexOf("Opera")<1?1:0,this.searchedQuery="",this.isGSOpened=!1,this.loadFileIndex=0,this.searchURL="",this.showresultsURL="",this.currSearchQuery="",this.isNonSSE=!1,this.loadResultPageFile=!1,this.fetchResCount=25,this.global=this,this.isWhichPagePresent="",this.isAPICalled=!1,this.resultHolder=[],this.searchedType="",this.isClickOutsideOfGS=!1,this.setSearchURL=function(a){GSCommon.searchURL=a},this.getSearchURL=function(){return GSCommon.searchURL},this.getSearchType=function(){return $gs("gs_searchTypeSel").value},this.getQueryFromSearchBox=function(){return $gs("gs_query").value},this.getVersionDetails=function(){var a=GSConstant.GS_VERSION,b=GSConstant.BUILD_DATE;return a!==undefined&&b!==undefined?"&version="+GSConstant.GS_VERSION+"&bdate="+GSConstant.BUILD_DATE:""},this.getRequestObject=function(){try{var a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest;else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}catch(b){throw alert("Unable to create XML Http Object for Ajax Request. <br>Reason :"+b.message),b}return a},this.removeEle=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},this.getParentWithAttr=function(a,b){var c=a.parentNode;if(a.getAttribute(b)!=null)return a;while(c!=null&&c.getAttribute!=null){if(c.getAttribute(b)!=null)return c;c=c.parentNode}return null},this.trimSpaces=function(a){return a.replace(/(\s+)/g,"")},this.getMsg=function(a){var b=GSCommon.trimSpaces(a);return GSConstant.jsMessages!=null?GSConstant.jsMessages[b]||a:a},this.isValid=function(){var a=$gs("gs_query").value;return $gs("gs_query").value=a,a.length<1||a.match(/^\s+$/)?!1:(GSCommon.currSearchQuery=a,!0)},this.stopEventBubble=function(a){a&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),window.event&&(window.event.cancelBubble=!0,window.event.returnValue=!1)},this.chkAndSetQuery=function(a){GSCommon.isWhichPagePresent=a,GSCommon.isValid()&&GSCommon.getResultsIn()},this.getResultsIn=function(){GSCommon.showProgress();var a=$gs("gs_resultPageDiv");a.className="zgs19_Non",a.innerHTML="",$gs("gs_zohosearch").setAttribute("class","gs_zohosearch gs_zohosearchHeight"),GSCommon.currSearchQuery=GSCommon.getQueryFromSearchBox(),GSCommon.handleSearch()},this.handleError=function(a,b){var c=$gs("gs_resultPageDiv");a?c.className=a:c.className="zgs19_ResultPageDivRes";var d="";b?d=b:d=GSCommon.getMsg("gs.search.error.generic_error_messege"),c.innerHTML="<div class='zgs19_Topbg'>"+d+"</div>"},this.showProgress=function(){var a=$gs("gs_loader");a.className="zgs19_FltLeft zgs19_Dis zgs19_gsLoader zgs19_ResLoader"},this.removeProgress=function(){var a=$gs("gs_loader");a.className="zgs19_Non"},this.handleSearch=function(){GSCommon.setResultsURL(),typeof EventSource!="undefined"?GSCommon.handleSearchForSSE():GSCommon.handleSearchForNonSSE()},this.setResultsURL=function(){GSCommon.showresultsURL="/zgssearch/gsshowresults?",typeof EventSource=="undefined"&&(GSCommon.isNonSSE=!0,GSCommon.showresultsURL="/zgssearch/gsfallbackshowresults?")},this.handleSearchForNonSSE=function(){var a=encodeURIComponent(GSCommon.currSearchQuery),b=GSCommon.getSearchType(),c=GSCommon.showresultsURL+"&query="+a+"&search_type="+b+"&is_scroll=false&gs_module=gsservice&no_of_results="+GSCommon.fetchResCount;GSCommon.setSearchURL(c),c+=GSCommon.getVersionDetails(),GSCommon.searchedQuery=GSCommon.currSearchQuery,GSCommon.searchedType=b;if(c&&c!=null){c+="&__T="+(new Date).getTime();var d=GSCommon.getRequestObject();d.onreadystatechange=function(){if(d.readyState===4&&d.status===200){var a=d.responseText;try{COMMON.onSuccessFunction(a,"NONSSE")}catch(b){var c={NONSSE:a};GSCommon.resultHolder.push(c),GSCommon.waitForFileLoading()}}else d.readyState===4&&d.status!==200&&(GSCommon.removeProgress(),GSCommon.handleError("zgs19_ResultPageDivResError"))},d.open("GET",c,!0),d.send()}},this.handleSearchForSSE=function(){var a=encodeURIComponent(GSCommon.currSearchQuery),b=GSCommon.getSearchType();GSCommon.searchedQuery=GSCommon.currSearchQuery,GSCommon.searchedType=b;var c=GSCommon.showresultsURL;c&&c!==null&&(c+="&query="+a+"&search_type="+b+"&is_scroll=false&gs_module=gsservice&no_of_results="+GSCommon.fetchResCount+"&__T="+(new Date).getTime(),GSCommon.setSearchURL(c),GSCommon.removeEventSource(),GSCommon.handleSearchQuery(b))},this.handleSearchQuery=function(){var a=GSCommon.getSearchURL()+GSCommon.getVersionDetails();eventSource=new EventSource(a),eventSource.addEventListener("initial_Weightage",function(a){GSCommon.searchResults(a.data,"INITIAL_WEIGHTAGE")}),eventSource.addEventListener("version",function(a){GSCommon.searchResults(a.data,"VERSION")}),eventSource.addEventListener("result",function(a){GSCommon.searchResults(a.data,"RESULT")}),eventSource.addEventListener("weightage",function(a){GSCommon.searchResults(a.data,"WEIGHTAGE")}),eventSource.onmessage=function(a){GSCommon.searchResults(a,"CLOSE")},eventSource.onerror=function(a){GSCommon.searchResults(a,"ERROR")}},this.searchResults=function(a,b){if(typeof COMMON=="object")GSCommon.loadResultAfterFileLoading(),COMMON.onSuccessFunction(a,b);else{var c={};c[b]=a,GSCommon.resultHolder.push(c);if(b==="CLOSE"||b==="ERROR")GSCommon.removeEventSource(),GSCommon.waitForFileLoading()}},this.waitForFileLoading=function(){var a=!1,b=setInterval(function(){typeof COMMON=="object"&&(a=!0,clearInterval(b),GSCommon.loadResultAfterFileLoading())},5),c=setTimeout(function(){a||(clearInterval(b),GSCommon.removeProgress(),GSCommon.handleError("zgs19_ResultPageDivResError","Unable to process request. Please try after some time")),clearTimeout(c)},1e4)},this.loadResultAfterFileLoading=function(){var a=GSCommon.resultHolder;for(var b=0;b<a.length;b++){var c=a[b];for(var d in c)COMMON.onSuccessFunction(c[d],d)}GSCommon.clearResultHolder()},this.clearResultHolder=function(){GSCommon.resultHolder=[]},this.removeEventSource=function(){eventSource!==undefined&&(eventSource.close(),eventSource=undefined)},this.loadResPageJSCSS=function(){var a=$gs("gs_jsMsg").value;GSCommon.setGSConstantObj(a),GSCommon.removeEle($gs("gs_jsMsg"))},this.loadCSSFile=function(a,b,c,d){if(typeof a!==undefined){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",a),document.getElementsByTagName("head").item(0).appendChild(e),GSCommon.checkAndLoadExternalFiles(e,b,c,d)}},this.loadJSFile=function(a,b,c,d){if(typeof a!==undefined){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",a),document.getElementsByTagName("head").item(0).appendChild(e),GSCommon.checkAndLoadExternalFiles(e,b,c,d)}},this.checkAndLoadExternalFiles=function(a,b,c,d){a.readyState?a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete")a.onreadystatechange=null,b&&VersionHandler.docallBackSearchOnFileLoad(b,c,d)}:a.onload=function(){b&&VersionHandler.docallBackSearchOnFileLoad(b,c,d)}},this.setGSHeight=function(){var a=$gs("gs_zohosearch");a.height="520px;",a.width="410px;";var b=$gs("wmstoolbar").offsetHeight,c=typeof window.innerHeight!==undefined?window.innerHeight:document.documentElement.clientHeight,d=typeof window.innerWidth!==undefined?window.innerWidth:document.documentElement.clientWidth,e=c-(b+$gs("gs_zohosearch").offsetHeight),f=d-$gs("gs_zohosearch").offsetWidth;a.style.left=f+"px",a.style.top=e+"px"},this.queryChange=function(){var a=$gs("gs_query").value,b=setTimeout(function(){GSCommon.currSearchQuery=a,clearTimeout(b)},10)},this.sFocus=function(a){},this.sBlur=function(a,b){},this.getSourceElem=function(a){return window.event&&window.event.srcElement?window.event.srcElement:a&&a.target?a.target:a&&a.src?a.src:null},this.gsClose=function(){GSCommon.wmsuiSelectGS(!1),GSCommon.isGSOpened=!1,$gs("gs_zohosearch").style.display="none",typeof GS=="object"&&(GS.hideSubWidget(),GS.clearHighlightedRes()),typeof AutoComplete=="object"&&AutoComplete.hideDropDown()},this.closeGSfromAction=function(a){var b=a?a:window.Event;if(b!==undefined){var c=$gs("wmsgssearchico"),d=GSCommon.getSourceElem(a),e=GSCommon.getParentWithAttr(d,"gssearch");GSCommon.isClickOutsideOfGS=!1,GSCommon.isGSOpened&&e!==$gs("gs_zohosearch")&&a.target!==c&&(GSCommon.gsClose(),GSCommon.isClickOutsideOfGS=!0)}},this.attachGSBodyMethod=function(){window.addEventListener?(window.addEventListener("keydown",function(a){GSCommon.gsKeydown(a)},!0),window.addEventListener("mousedown",function(a){GSCommon.closeGSfromAction(a)},!0),window.addEventListener("resize",function(){GSCommon.setGSHeight()},!1)):window.attachEvent&&(window.attachEvent("keydown",function(a){GSCommon.gsKeydown(a)},!0),window.attachEvent("onmousedown",function(a){GSCommon.closeGSfromAction(a)},!0),window.attachEvent("onresize",function(){GSCommon.setGSHeight()}))},this.gsKeydown=function(a){var b=a.keyCode?a.keyCode:a.which;(a.ctrlKey||a.metaKey)&&a.shiftKey&&b===70?(GSCommon.showSearch(),GSCommon.stopEventBubble(a)):typeof KEYBOARD=="object"&&KEYBOARD.keydownAction(a)},this.dummyLoadSource=function(){var a=document.createElement("div");a.id="gs_dummyImgDiv",a.style.display="block",a.style.position="absolute",a.style.top="-2px",document.body.appendChild(a);var b=["zgs19_uniCommon","zgs19_uniProcess"],c=b.length;for(var d=0;d<c;d++)window[b[d]]=document.createElement("div"),window[b[d]].setAttribute("class",b[d]),$gs("gs_dummyImgDiv").appendChild(window[b[d]]);a.innerHTML="<div class='zgs19_uniCommon'></div><div class='zgs19_uniProcess'></div>",document.body.appendChild(a)},this.dummyLoadSource(),this.addSearchBox=function(){var a=$gs("gs_zohosearch");if(a!==null&&a!==undefined)return;a=document.createElement("div"),a.id="gs_zohosearch",a.className="gs_zohosearch",a.setAttribute("gs","true"),a.setAttribute("gssearch","true"),a.style.display="none";var b="<div id='zgs20_globalsearchResults' class='zgs19_ResultPageDivRes zgs19_height527'>\n                            <div id='gs_Home' class='zgs19_gsTopBand zgs19_FltLeft'>\n                                <div class='zgs19_gsDivBgRes zgs19_FltLeft' id='zgs20_gsSearchIcon'>\n                                    <img src='/zgssearch/images/gsspacer.gif' class='zgs19_Uniallsearch zgs19_AppSearch zgs19_CursorDef' title='"+WmsResource.getRealValue("GS_search_all_service_search")+"' id='gs_serviceImg'/>\n                                </div>\n                                <div class='zgs19_DivCenter zgs19_gsInputBand' id='searchInputHolder'>\n                                    <input type='text' spellcheck='false' id='gs_query' gsPage='home' placeholder='"+WmsResource.getRealValue("GS_Search_across_zoho")+"' autocomplete='off' name='query' class='zgs19_gsCursorUniSearchField zgs19_gsFocus zgs19_FltLeft' onkeyup='GSCommon.queryChange();' onkeypress='if(event.keyCode == 13){GSCommon.chkAndSetQuery(\"home\")};'/>\n                                </div>\n                                <div class='zgs19_DivCenter'>\n                                    <input type='hidden' class='zgs19_Non' id='gs_searchTypeSel' name='search_type' value='all' autocomplete='off'>\n                                </div>\n                            </div>\n                            <div id='gs_loader' class='zgs19_FltLeft zgs19_Non zgs19_gsLoader zgs19_ResLoader'></div>\n                            <div id='gs_resultPageDiv' class='zgs19_ResultPageDivRes zgs19_ShowResultAllPage zgs19_height494'></div>\n                            <div id='zgs20_appendResMenuItem'></div>\n                        </div>";a.innerHTML=b,document.body.appendChild(a),this.attachGSBodyMethod()},this.setGSConstantObj=function(a){var b=JSON.parse(a);for(var c in b)GSConstant[c]=b[c];GSConstant.oldVersion=wmsUserConfig.gsv,GSConstant.oldBuildDate=GSConstant.BUILD_DATE,GSCommon.loadGSFiles()},this.loadGSFiles=function(){GSCommon.loadCSSFile(GSConstant.gsresultCSSURL);var a=!1;typeof jQuery!="undefined"&&typeof jQuery!==undefined&&jQuery().jquery==="1.7.1"&&(_jQueryGS=jQuery,a=!0,GSCommon.loadJSFile(GSConstant.gsresultJSURL));if(!a){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.src=GSConstant.gsjQueryURL,b.onload=function(){_jQueryGS=jQuery.noConflict(!0),GSCommon.loadJSFile(GSConstant.gsresultJSURL)},document.getElementsByTagName("head").item(0).appendChild(b)}},this.handleFetchDataForSSE=function(){$gs("gs_loader").innerHTML="<div class='zgs19_loader'></div>";var a="/zgssearch/gsfetchDataSSE",b=new EventSource(a);b.addEventListener("gsConstant",function(a){GSCommon.setGSConstantObj(a.data)}),b.addEventListener("widget",function(a){GSConstant.widgetObject=JSON.parse(a.data)}),b.onmessage=function(a){a.data==="CLOSE"&&b.close()},b.onerror=function(){b.close()}},this.handleSearchForAPI=function(){if(typeof EventSource!="undefined")GSCommon.handleFetchDataForSSE();else{var a="/zgssearch/gsfetchData",b=GSCommon.getRequestObject();b.onreadystatechange=function(){if(b.readyState==4&&b.status==200){var a=b.responseText;$gs("gs_loader").innerHTML=a,GSCommon.loadResPageJSCSS()}},b.open("GET",a,!0),b.send()}},this.showSearch=function(){var a=$gs("gs_zohosearch");a.style.display=="none"?(GSCommon.wmsuiSelectGS(!0),a.style.width="463px",a.style.display="block",GSCommon.isGSOpened=!0,GSCommon.setGSHeight(),$gs("gs_query").select(),GSCommon.loadResultPageFile||(GSCommon.handleSearchForAPI(),GSCommon.removeEle($gs("gs_dummyImgDiv")),GSCommon.loadResultPageFile=!0),typeof INIT=="object"&&INIT.showAutoComplete()):GSCommon.gsClose()},this.wmsuiSelectGS=function(a){var b=$gs("wmsglobalsearch");b&&(a?WMSUI.selectGS&&WMSUI.selectGS():WMSUI.unselectGS&&WMSUI.unselectGS())},this.addSearchBox()};