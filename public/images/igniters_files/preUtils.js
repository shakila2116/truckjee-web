"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}!function(){var a={networkUnreachable:"Unable to reach the server. Please check your network connections.",captchaFail:"Operation not permitted due to captcha validation failure",sessionInvalid:"Your session is invalid. You will be logged out in 3 seconds!!"},b=function(){},c=[];b.getCookie=function(a){a=new RegExp("^"+a+"=");for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(a.test(d))return d.replace(a,"")}return null},b.getErrorDebuggerLog=function(){return c},b.failCodes={unknown:0,0:"unknown",connectivity:"1",1:"connectivity",captcha:"2",2:"captcha",others:"3",3:"others"},b.XHR=function(b){var d=(new Date).getTime(),e=b.u,f=b.p||{},g=b.t,h={};"get"===g.toLowerCase()?e=e+(e.indexOf("?")+1?"&":"?")+"xhr="+d:b.h?h={"X-ZCSRF-TOKEN":"zmrcsr="+zmAjq.getCookie("zmcsr")}:f.zmrcsr=zmAjq.getCookie("zmcsr");var i=function(c,d){var e=!0,f=typeof c;if("object"===f&&(b.removeLoader&&b.removeLoader(),1===Number(c[0])&&(e=!1,b.fn&&b.fn(c[1],b.ep))),e){var g="";g="string"===f?c:b.onerror?c[1]:c[1]&&c[1].msg;var h=zmAjq.failCodes,i=h.unknown;d.responseText||0!==d.status?b.oncaptchafailure&&c instanceof Array&&c[1]instanceof Object&&c[1].captcha?(_zm.succErrMsg("e",a.captchaFail),b.oncaptchafailure(g,b.ep,d),i=h.captcha):b.onerror?(i=h.others,b.onerror(g,b.ep,d,i)):(b.efn||_zm.succErrMsg("e",g),i=h.others):("abort"!==d.statusText&&_zm.succErrMsg("e",a.networkUnreachable),b.onnetfailure&&b.onnetfailure(b.ep),i=h.connectivity),b.efn&&b.efn(g,b.ep,d,i)}},j={url:e,type:g,data:$.param(f,!0),dataType:"json",headers:h,success:function(a,b,c){i(a,c)},error:function(b,d,e){b.responseText=$.trim(b.responseText);var f;try{f=$.parseJSON(b.responseText)}catch(g){f={}}var h=!1;f instanceof Array&&f.length>1&&!isNaN(f[0])&&f[1]instanceof Object||(c.push({xhrObj:j,xhrresp:b,rstatus:d}),h=!0),h||(f[1].authFail?(_zm.succErrMsg("e",a.sessionInvalid),setTimeout(function(){$(location).attr("href",zmail.logoutURL)},3e3)):f[1].captcha?zmscaptcha.createCaptchaDialog(f[1].captcha,j,function(){i(b.responseText&&f,b)}):h=!0),h&&i(b.responseText&&f,b)}};return $.ajax(j)},b.formSubmit=function(a,b){_zm("#","tarIframe")||_zm("<","body")[0].appendChild(_zm.getDOM(["IFRAME",{attrs:{id:"tarIframe",name:"tarIframe",style:"display:none",width:"0",height:"0",frameborder:"0"}}]));var c=_zm("<","body")[0].appendChild(_zm.getDOM(["FORM",{attrs:{id:"dwnFrm",style:"display:none",target:"tarIframe",name:"dwnFrm",enctype:"multipart/form-data",method:"post",action:b}}]));for(var d in a)c.appendChild(_zm.getDOM(["INPUT",{attrs:{type:"hidden",name:d,value:a[d]}}]));c.appendChild(_zm.getDOM(["INPUT",{attrs:{type:"hidden",name:"zmrcsr",value:zmAjq.getCookie("zmcsr")}}])),c.submit(),_zm.remove(c)};try{var d={};d[zmail.urls.gadURL]=1,window.addEventListener("message",function(a){if(a.origin in d){var b=$.parseJSON(a.data);$.publish(b.eventName,b.data)}})}catch(e){window.console.error&&window.console.error(e)}window.zmAjq=b}(),window._zm=function(){var a={zohoMail:"Zoho Mail"},b=document,c=navigator.userAgent.toLowerCase(),d=[],e=function(a,c,d){var e="#"!==a&&d?d:b;switch(a){case"#":return e.getElementById(c);case".":return e.getElementsByClassName(c);case"<":return e.getElementsByTagName(c)}};e.is_mac=c.indexOf("mac")!==-1,e.is_ie11=/Trident\/7.0;/.test(navigator.userAgent)&&/rv:11.0/i.test(navigator.userAgent),e.is_ie=c.indexOf("msie")!==-1,e.is_opera=c.indexOf("opera")!==-1,e.is_typesafari=c.indexOf("safari")!==-1,e.findParentWithClass=function(a,b){for(;a&&a.parentNode;)if(a=a.parentNode,e.hasClass(a,b))return a},e.remove=function(a){if(a instanceof HTMLCollection||a instanceof NodeList)for(var b=e.nodeList2Array(a),c=b.length,d=0;d<c;d++)e.removeElement(b[d]);else e.removeElement(a)},e.removeElement=function(a){(a instanceof HTMLElement||a instanceof Node)&&b.body.contains(a)&&a.parentNode.removeChild(a)},e.blindRemoveElement=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},e.addClass=function(a,b){if(a){if(a instanceof NodeList||a instanceof HTMLCollection)return void Array.prototype.forEach.apply(a,[function(a){e.addClass(a,b)}]);if(a.classList)a.classList.add(b);else{var c=e.attr(a,"class");c&&(b=c+" "+b),e.setAttr(a,{"class":b})}}},e.removeClass=function(a,b){if(a){if(a instanceof NodeList||a instanceof HTMLCollection)return void Array.prototype.forEach.apply(a,[function(a){e.removeClass(a,b)}]);a.classList?a.classList.remove(b):e.setAttr(a,{"class":b})}},e.hasClass=function(a,b){return a&&a.classList&&a.classList.contains(b)||!1},e.show=function(a,b){b===!0?a.style.visibility="visible":a.style.display=""},e.hide=function(a,b){b?a.style.visibility="hidden":a.style.display="none"},e.bindkeys=function(a,b){var c=function(a){var c=this||window,d=a.keyCode||a.which,e=b[d];e&&(e.length>1?e[0].apply(c,e[1]):e[0].apply(c))};a.addEventListener?a.addEventListener("keyup",c,!1):a.attachEvent&&a.attachEvent("keyup",c)},e.bind=function(a,b,c,d,e){zmComponent.bind({elm:a,ev:b,fn:c,args:d,capture:e})},e.unbind=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},e.bindReset=function(a,b,c,d,f){e.unbind(a,b,c),e.bind(a,b,c,d,f)};var f=function(a,b){var c;return a&&a.elm===!0&&(a.args?(c=_zm.copyOf(a.args),c.unshift(b)):c=[b]),c};e.bind2Nodes=function(a,b,c,d){var g;if(a instanceof NodeList||a instanceof HTMLCollection)for(var h=0;h<a.length;h++)g=f(d,a[h]),e.bind(a[h],b,c,g);else g=f(d,a),e.bind(a,b,c,g)};var g=function(a,b,c){var d=b.parentNode;a?d.lastChild===b?d.appendChild(c):d.insertBefore(c,b.nextSibling):d.insertBefore(c,b)};e.before=function(a,b){g(!1,a,b)},e.after=function(a,b){g(!0,a,b)},e.append=function(a,b){a.appendChild(b)},e.attr=function(a,b){return a.getAttribute(b)},e.setAttr=function(a,b){for(var c in b){var d=b[c];a.setAttribute(c,d)}},e.concatJSON=function(a,b,c){c=void 0===c||c;for(var d in a)c?b[d]=a[d]:void 0===b[d]&&(b[d]=a[d])},e.clearField=function(a){a&&(a.value="")},e.clearHTML=function(a){a&&(a.innerHTML="")},e.emptyString=function(a){return null===a||void 0===a||0===a.trim().length},e.copyOf=function(a){for(var b=a instanceof Array==!1?{}:[],c=Object.keys(a),d=0,e=c.length;d<e;d++){var f=c[d];b[f]=a[f]}return b};var h=new Image;e.preloadimg=function(a){h.src=a},e.indexOf=function(a,b){var c,d;if(Array.prototype.indexOf)return a.indexOf(b);for(d=a.length,c=0;c<d;c++)if(a[c]===b)return c;return-1},e.pluck=function(a,b){var c,d,e=[];for(d=a.length,c=0;c<d;c++)a[c]!==b&&e.push(a[c]);return e},e.bindFn=function(a,b){return Function.prototype.bind.apply(a,Array.prototype.slice.call(arguments,1))},e.stopEvents=function(a,b){try{a||(a=window.event),a.stopPropagation?(b||a.preventDefault(),a.stopPropagation()):(a.cancelBubble=!0,a.returnValue=!1)}catch(c){}},e.nodeList2Array=function(a){var b,c=[],d=a.length;for(b=d-1;b>=0;b--)c.push(a.item(b));return c.reverse()},e.isVisible=function(a){if(!a)return!1;if(a.style){if("none"===a.style.display)return!1;if("hidden"===a.style.visibility)return!1}return!0},e.setCookie=function(a,c){var d=new Date;d.setTime(d.getTime()+31536e6),b.cookie=a+"="+c+";expires="+d.toGMTString()},e.getCookie=function(a){var c,d,e,f,g;return c=b.cookie.indexOf(a),c!==-1?(g=a.length,e=b.cookie.indexOf(a)+g,f=b.cookie.indexOf(";",e),f===-1&&(f=b.cookie.length),d=b.cookie.substring(e+1,f)):null},e.removeCookie=function(a){b.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.getDOM=function(){return function(a){return zmComponent.htmlizer(a)}}(),e.setTextContent=function(a,c,d){d&&(a.innerHTML=""),a.appendChild(b.createTextNode(c))},e.succErrMsg=function(a,c,d){if(c){var e,f,g,h,i=[];if(g={s:"SC_smsg",e:"SC_emsg",i:"SC_imsg"},h=g[a]||g.i,d=d||{},i.push(["text",c]),d.noHide&&i.push(["I",{attrs:{"class":"msi-close"}}]),e=_zm.getDOM(["DIV",{attrs:{"class":"SC_msg"},child:[["SPAN",{child:i}]]}]),_zm.bind(e,"click",function(a){var b=a.target||a.srcElement;"msi-close"===b.className&&_zm.remove(b.parentNode.parentNode)},[]),f=d.appId?zmsuite.getCenter(d.appId)[0].$el[0].parentNode:d.parElem?d.parElem:b.body,f.appendChild(e),_zm.show(e),_zm.addClass(e,h),!d.noHide){var j=3e3;d.hideAfter=d.hideAfter||"auto","auto"===d.hideAfter&&(j=zmail.Utils.TextUtil.calculateReadTime(c),j<3e3&&(j=3e3),d.hideAfter=j),zmUtil.debugLog("_zm.succErrMsg","Estimated seconds needed to read",d.hideAfter/1e3),setTimeout(function(){_zm.removeClass(e,h),setTimeout(function(){_zm.remove(e)},1e3)},d.hideAfter)}}},e.escapeTags=function(a){return a=a.replace(/"/gi,"&quot;").replace(/'/gi,"&#39;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;")},e.unescapeTags=function(a){return a=a.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/&apos;/gi,"'")};var i;return e.actionMessages=function(a,c){a=a||{};var d,e,f,g={s:"SC_smsg",e:"SC_emsg",i:"SC_imsg",undefined:"SC_imsg"},h=[],j=a.links||[],k={};f=a.appId?zmsuite.getCenter(a.appId)[0].$el[0].parentNode:a.parElem?a.parElem:b.body,j.forEach(function(a){var b=a.name,c=a.callback,d=a.type||"link";"text"===d?h.push(["text",b]):h.push(["I",{attrs:{"data-type":b,"class":"SC_lnk",style:"margin-left:3px; margin-right:3px;"},child:[["text",b]]}]),c&&(k[b]=c,k[b+"stay"]=a.stay)}),e=_zm.getDOM(["DIV",{attrs:{"class":"SC_msg"},child:[["SPAN",{child:h}]]}]),d=$(e),i=d,d.on("click","i",function(a){var b=$(a.target).data("type"),c=k[b];c&&c(),k[b+"stay"]||(d.remove(),i=void 0)}),$(f).append(e),_zm.show(e),_zm.addClass(e,g[c]||"")},e.removeActionMessages=function(){i&&(i.remove(),i=void 0)},e.getProperty=function(a,b){for(var c,d=b.split("."),e=a,f=d.length,g=0;g<f;g++)if(e=c=e[d[g]],void 0===c)return c;return c},e.pushDesktopNotification=function(b){var c=b.title||a.zohoMail,d=b.tag||"default",e=b.msg||"",f=b.imgUrl||zmail.imgPath+"logo.png",g=zmUtil.getWindowVisibilityStatus(),h=zmUtil.getDesktopNotificationPermission(),i="function"==typeof b.callback?b.callback:void 0;if(g=Boolean(g>-1&&!g),1===zmail.mailOpt.dtNotify&&h>-1&&0===h&&g){var j=window.Notification;if("Notification"in window){var k=new j(c,{icon:f,tag:d,body:e});"function"==typeof i&&(k.onclick=function(){window.focus(),i(b)}),setTimeout(k.close.bind(k),3e3)}}},e.registerLeftClickHandlers=function(a){d.push(a)},e.getLeftClickHandlers=function(){return d},e.getDOMReferenceMap=function(a,b,c){c=c||"ref",a=$(a);var d,e,f,g=$("["+c+"]",a),h={};for(g=g||[],$(a).attr(c)&&g.push($(a)[0]),d=0,e=g.length;d<e;d++)f=g[d],h[$(f).attr(c)]=$(f)[0],b&&$(f).removeAttr(c);return h},e._isPrivilegedUser=function(){var a,b=!1,c=["11160417","36902612"],d=c.length;for(a=0;a<d&&!(b=zmCont.isGroup(c[a]));a++);return b},e}(),function(){var a=$({});$.subscribe=function(){a.on.apply(a,arguments)},$.unsubscribe=function(){a.off.apply(a,arguments)},$.publish=function(){a.trigger.apply(a,arguments)}}(),zmail.Printer=function(a){var b=!0,c=0,d=function(){return c+=1,"zmailpw"+c+"_blank"},e=function(){return"status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,titlebar=yes"},f=function(){var a=window.open("",d(),e());return a&&a.opener&&(a.opener=void 0),a},g=function(a){if(_.isString(a))return a;var b=$("<div/>");return b.append(a),b.html()},h={js:["printEvents.js"],css:["zmcss.css","zmprint.css"]},i=function(a){return a.createTitle=function(a){return"<title>"+a.title+"</title>"},a.cssLinks=function(a){if(a&&a.length)return a.map(function(a){return"<link href='"+window.location.protocol+zmail.cssPath+a+"'  rel='stylesheet' />"}).join("")},a.scriptTags=function(a){if(a&&a.length)return a.map(function(a){return"<script src='"+window.location.protocol+zmail.jsPath+a+"'></script>"}).join("")},a.createPrintButton=function(){return["<div class='rgtdiv'>","<div class='SC_Paction' id='pbtn'  onclick='window.print()'>","<span>","<i class='msi-print'></i>","Print","</span>","</div>","</div>"].join("")},a}({}),j=function(a){var b=a.printWindow||f();if(b){b.document.open("text/html"),b.document.write(i.createTitle(a));var c=_.isArray(a.css)?a.css:[];b.document.write(i.cssLinks(c.concat(h.css))),b.document.write(i.createPrintButton()),b.document.write(g(a.content)),b.document.write(i.scriptTags(h.js)),b.document.close()}},k=function(){return b=!0,$.Deferred().reject().promise()},l=function(){var a=zmTab.getTabObject();return a&&a.print?a.print:k};return a.print=function(a){var c;return a?void j(a):void(b&&(b=!1,l()().progress(function(){c=f()}).done(function(a){a.printWindow=c,j(a)}).always(function(){b=!0})))},a}(zmail.Printer||{}),window.zmshCut=function(a){var b=function(a,b,c){return zmText.get("preUtils","shortcut."+a,b,c)},c={shortcutException:!0,type:"i",message:b("dispMsg.selectMail")},d={shortcutException:!0,type:"i",message:b("dispMsg.selectMails")},e={mail:"m",task:"t",notes:"n",calendar:"c",streams:"zmStreamsApp",attachmentViews:"attView",notifications:"zmncenter",settings:"settings"},f={m:function(){zmUtil.hideMenu(),zmUtil.compose()},t:function(){zmUtil.hideMenu(),zmUtil.loadTask({action:"addCTask",groupId:zmail.zuid})},n:function(){zmUtil.hideMenu(),"n"===zmApp.currentApp?znNote.createInlineNotes():zmUtil.loadNotes("popup")},c:function(){zmUtil.hideMenu(),zmApp.loadCalendar("/calendar/event")}},g=function(a,b){var e,f=zmUtil.getSelectedMails(),g=f[0].length,h=f[1].length;if(g||h){if(a||1===g&&0===h||0===g&&1===h){if(a)return f;e=g?f[0][0]:f[1][0]}else if(!b)throw c}else if(!b)throw d;return e},h=function(a){var b,c=zmInit.getListingDetObj();return a=a||c.fId,b=zmail.folId,a===b.dId||a===b.teId||a===b.oId},i={"!":"shift+1","@":"shift+2","#":"shift+3",$:"shift+4","%":"shift+5","^":"shift+6","&":"shift+7","*":"shift+8","(":"shift+9",")":"shift+0","{":"shift+openBracket","}":"shift+closeBracket","|":"shift+backSlash","/":"forwardSlash","\\":"backSlash","[":"openBracket","]":"closeBracket","`":"backtick","~":"shift+backtick","'":"singleQuote",'"':"shift+singleQuote",";":"semiColon",":":"shift+semiColon",".":"period",",":"comma","=":"equalTo","+":"shift+equalTo","-":"minus",_:"shift+minus"},j=["gotoInbox","gotoUnreadView","gotoSentbox","gotoDraft","gotoFlagView","gotoAllView","gotoLabelView","selectMail","selectAllMail","deSelectAllMail","previousMail","nextMail","expandFolder","collapseFolder","previousTab","nextTab","closeTab","sendMail","sendMailNow","saveDraft","saveTemplate","cmposeToWin","compose","reply","replyAll","forward","editAsNew","search","advanceSearch","markmenu","labelMenu","shortcutMenu","moveToMenu","viewMenu","clearMenu","clearLabel","openMailInTab","openMailInWin","closePreview","showOriginalMail","fetchMail","reportSpam","printMail","markAsUnread","markAsRead","deleteMail","archiveMail","addToFilter"],k={},l=function(a){var b,c,d,e,f,g,h,k,l,m=zmail.encodedShortcut||{},n=Object.keys(m).length;for(k=1;k<=n;k++){for(c="",b=m[k],b=b.replace(/&#34;/g,'"'),b=b.replace(/&#39;/g,"'"),b=b.replace(/&#92;/g,"\\"),b.length>4&&b.indexOf("ctrl")!==-1&&(c+="ctrl+",b=b.replace("ctrl","")),b.length>5&&b.indexOf("shift")!==-1&&(c+="shift+",b=b.replace("shift","")),b.length>4&&b.indexOf("enter")!==-1&&(c+="enter",b=b.replace("enter",""),b&&(c+="+")),b.length>2&&b.indexOf("ESC")!==-1&&(c+="esc",b=b.replace("ESC",""),b&&(c+="+")),b.length>2&&b.indexOf("Delete")!==-1&&(c+="delete",b=b.replace("Delete",""),b&&(c+="+")),e=b.length,f=e-1,l=0;l<e;l++)g=b.charCodeAt(l),h=b.charAt(l),c+=g>=65&&g<=90?"shift+"+h.toUpperCase():h in i?i[h]:h.toUpperCase(),l<f&&(c+="/");d=j[k-1]||k,a[d]=c}},m=[],n=[],o=[],p=[];a.currentLeftId=1===zmail.mailOpt.isFol?zmail.folId&&zmail.folId.iId:"zm_unread";var q=function(a,b){b||(b=$("#"+a)),b.trigger("click");var c=b[0];c.scrollIntoView&&c.scrollIntoView()},r=function(b){var c,d,e,f,g;switch(b){case"gotoInbox":q(zmail.folId.iId);break;case"gotoUnreadView":q("zm_unread");break;case"gotoSentbox":q(zmail.folId.sId);break;case"gotoDraft":q(zmail.folId.dId);break;case"gotoFlagView":q("zm_flag");break;case"gotoAllView":q("zm_all");break;case"gotoLabelView":q(null,$($("#zmllabel").children()[0]));break;case"expandFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&(g=zmail.mailLeft.getNodes()[0].el.find("#"+a.currentLeftId),g.hasClass("SC_ltl")?g.next(".SC_ldt").is(":visible")||g.trigger("click"):zmInit.findFolName(a.currentLeftId)&&g.find("i").not(".msi-arrow45").trigger("click"));break;case"collapseFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&(g=zmail.mailLeft.getNodes()[0].el.find("#"+a.currentLeftId),g.hasClass("SC_ltl")?g.next(".SC_ldt").is(":visible")&&g.trigger("click"):zmInit.findFolName(a.currentLeftId)&&g.find("i.msi-arrow45").trigger("click"));break;case"nextRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")&&(d=zmail.mailLeft.getNodes()[0],e=d.el,c=e.find(".SC_ltl:visible, .SC_tre:visible"),g=e.find("#"+a.currentLeftId),f=c.index(g[g.length-1]),f<c.length-1)){if(g=$(c[f+1]),g.hasClass("SC_ltl")){for(g=d.getLayer(g[0].id);g&&g.disableSelection;)g=d.getNextLayer(g.id);g&&(a.currentLeftId=g.id,c.filter(".Stre").removeClass("Stre"),$(g.el.children()[0]).addClass("Stre"),g=g.el)}else g.trigger("click");g&&g.position().top>e.height()-20&&e.scrollTop(e.scrollTop()+33)}break;case"previousRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")){d=zmail.mailLeft.getNodes()[0],e=d.el,c=e.find(".SC_ltl:visible, .SC_tre:visible"),g=e.find("#"+a.currentLeftId),f=c.index(g[g.length-1]);var h=$(c[f]);if(h.hasClass("SC_ltl")){h=d.getLayer(h[0].id);for(var i=d.getPreviousLayer(h.id);i&&i.disableSelection;)h=i,i=d.getPreviousLayer(h.id);g=e.find("#"+h.id),f=c.index(g[g.length-1])}f>0&&(g=$(c[f-1]),g.hasClass("SC_ltl")?(a.currentLeftId=g[0].id,c.filter(".Stre").removeClass("Stre"),g.addClass("Stre")):g.trigger("click"),g.position().top<20&&e.scrollTop(e.scrollTop()-33))}}},s=function(a,b){if("zm_Container"===zmTab.currentTab||zmTab.currentTab.indexOf("zm_srch")!==-1)switch(a){case"selectMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.chkSingleMsg();break;case"selectAllMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.chkAll();break;case"deSelectAllMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.unchkAll();break;case"previousMail":zmInit.isLeftFocused?(r("previousRow"),b.preventDefault()):zmList.listingFocused&&(zmPreviewTemplate.loadPrevMail(),b.preventDefault());break;case"nextMail":zmInit.isLeftFocused?(r("nextRow"),b.preventDefault()):zmList.listingFocused&&(zmPreviewTemplate.loadNextMail(),b.preventDefault());break;case"expandMail":zmInit.isLeftFocused?r("expandFolder"):zmList.showThreadTree();break;case"collapseMail":zmInit.isLeftFocused?r("collapseFolder"):zmList.hideThreadTree()}},t=function(a){var b,c,d,e,f,i=zmTab.currentTab.indexOf("zm_tab")!==-1?1:0;try{switch(a){case"reply":h()||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"reply",type:"t",msgId:g()}));break;case"replyAll":h()||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"replyall",type:"t",msgId:g()}));break;case"forward":h()||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"fwdi",type:"t",msgId:g()}));break;case"editAsNew":h()||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"eanew",type:"t",msgId:g()}));break;case"viewMenu":h()||"zm_Container"===zmTab.currentTab&&""!==zmInit.getListingDetObj().fId&&zmsuite.getCenter()[i].getNodes()[0].$el.find(".msi-filter").trigger("click");break;case"labelMenu":zmInit.getListingDetObj().fId!==zmail.folId.spId&&!h()&&g(!0,!0)&&(zmUtil.hideMenu(),zmsuite.getCenter()[i].getNodes()[0].$el.find(".msi-label").trigger("click"));break;case"moveToMenu":zmInit.getListingDetObj().fId===zmail.folId.spId||h()||!g(!0,!0)||zmUtil.isSharedFolder(zmInit.getListingDetObj().fId)||(zmUtil.hideMenu(),zmsuite.getCenter()[i].getNodes()[0].$el.find(".msi-folder").trigger("click"));break;case"clearLabel":h()||(c=zmUtil.getSelectedMailsWithLabels(),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.applyActions("label","click",{lA:"deleteall",msgId:d,thd:e}));break;case"openMailInTab":zmInit.getListingDetObj().fId!==zmail.folId.oId&&(zmInit.rclkId=g(),zmList.bindAction({action:"opentab",opentype:2}),zmInit.rclkId=0);break;case"openMailInWin":h()||(zmInit.rclkId=g(),zmList.bindAction({action:"openwindow",opentype:2}),zmInit.rclkId=0);break;case"showOriginalMail":b=g(),h(zmail.mailObj[b].FD)||zmPreviewTemplate.showOrgMsg({mId:b});break;case"reportSpam":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,g(!0,!1)&&!h(b)&&b!==c.spId&&b!==c.sId&&zmmailAct.doActions("spam");break;case"reportNotSpam":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,g(!0,!1)&&b===c.spId&&zmmailAct.doActions("notspam");break;case"printMail":b=g(),b&&!h(zmail.mailObj[b].FD)&&zmPreviewTemplate.printMsg({mId:b});break;case"markAsUnread":h()||(c=g(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.applyActions("unread",null,{msgId:d,thd:e}));break;case"markAsRead":h()||(c=g(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.applyActions("read",null,{msgId:d,thd:e}));break;case"deleteMail":c=g(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.doActions("delete",null,{msgId:d,thd:e});break;case"archiveMail":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,g(!0,!1)&&b!==c.teId&&b!==c.spId&&b!==c.dId&&b!==c.oId&&b!==c.tId&&zmmailAct.doActions("archive")}}catch(j){j.shortcutException&&_zm.succErrMsg(j.type,j.message)}},u=function(a,b,c){if(zmApp&&"m"===zmApp.currentApp)switch(b){case"mailLeft":r(a);break;case"mailListing":s(a,c);break;case"mailSelection":t(a)}},v=function(a,b,c){if(zmTab.currentTab.indexOf("Cmp")!==-1)switch(a){case"sendMail":zmComp.sendMail({action:"compose",sendIm:!1,cmpId:zmTab.currentTab});break;case"sendMailNow":zmComp.sendMail({action:"compose",sendIm:!0,cmpId:zmTab.currentTab});break;case"saveDraft":zmComp.sendMail({action:"sdraft",cmpId:zmTab.currentTab});break;case"saveTemplate":zmComp.sendMail({action:"stemplate",cmpId:zmTab.currentTab});break;case"gotoSubject":var d=$(c.target||c.srcElement),e=d.closest(".ze_body");e.length>0&&(e.focusout(),$("#zmsub_"+zmTab.currentTab).focus())}},w=function(a){var b=zmail.appList.appObj;switch(a){case"toMail":b.mail.selectApp(),zmApp.showApp(e.mail);break;case"toCalendar":b.cal.selectApp(),zmApp.showApp(e.calendar);break;case"toTask":b.task.selectApp(),zmApp.showApp(e.task);break;case"toNotes":b.notes.selectApp(),zmApp.showApp(e.notes);break;case"toStreams":zmsuite.loadStreams();break;case"toAttachment":zmsuite.loadAttachView()}},x=function(a){var b;switch(a){case"create":b=f[zmApp.currentApp],b&&b();break;case"composeMail":f.m();break;case"createEvent":f.c();break;case"createTask":f.t();break;case"createNotes":f.n()}},y=function(a){switch(a){case"search":break;case"mailSearch":zmSearch.updateSearchValues(e.mail);break;case"notesSearch":zmSearch.updateSearchValues(e.notes);break;case"taskSearch":zmSearch.updateSearchValues(e.task);break;case"streamsSearch":zmSearch.updateSearchValues(e.streams)}zmail.showFeature&&zmail.trialUsers?zmail.Search.focusSearchBox():zmSearch.searchField.select().focus()},z=function(){zmail.showFeature&&zmail.trialUsers&&zmail.Search.focusCommandBox()},A=function(a,b,c){var d,e;switch(a){case"clearMenu":zmUtil.hideMenu(!0);break;case"expandMail":case"collapseMail":case"previousMail":case"nextMail":u(a,b,c);break;case"previousTab":d=zmTab.getPreviousTabId(zmTab.currentTab),d&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(d));break;case"nextTab":d=zmTab.getNextTabId(zmTab.currentTab),d&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(d));break;case"closeTab":zmsuite.closeWorkspace(zmTab.currentTab)&&zmUtil.hideMenu(!0);break;case"closePreview":if(e=zmsuite.getCenter()[1],e&&e.$el&&e.$el.hasClass("shw")){var f=e.headerObj.$el.find(".msi-close");f&&f.trigger("click")}$.publish("zm/shortcuts/global/closepreview",{});break;case"gotoSubject":v(a,b,c);break;case"toMail":case"toCalendar":case"toTask":case"toNotes":case"toStreams":case"toAttachment":w(a,b);break;case"create":case"composeMail":case"createEvent":case"createTask":case"createNotes":x(a,b);break;case"genericSearch":case"mailSearch":case"taskSearch":case"notesSearch":case"streamsSearch":y(a);break;case"print":zmail.Printer.print();break;case"systemPrint":window.print();break;case"commands":z()}},B=function(a,b,c,d,e,f,g,h){return{scope:a,group:b||"default",uid:c,keyStr:d,actions:[e],includeHandling:g,preventDefault:h,displayName:f}},C=function(a){return a=a||{},a.toMail="A/M",a.toCalendar="A/C",a.toTask="A/T",a.toNotes="A/N",a.toStreams="A/S",a.toAttachment="A/F",a.create="C",a.composeMail="C/M",a.createEvent="C/E",a.createTask="C/T",a.createNotes="C/N",a.search="forwardSlash",a.mailSearch="forwardSlash/M",a.taskSearch="forwardSlash/T",a.notesSearch="forwardSlash/N",a.streamsSearch="forwardSlash/S",a},D=function(){m.push(B("default","mailListing","expandMail","rightArrow",A,b("dispNames.expandMail")),B("default","mailListing","collapseMail","leftArrow",A,b("dispNames.collapseMail")),B("default","mailListing","previousMail","upArrow",A,b("dispNames.previousMail")),B("default","mailListing","nextMail","downArrow",A,b("dispNames.nextMail")),B("default",null,"print","ctrl+P",A,b("dispNames.print"),!1,!0),B("default",null,"systemPrint","ctrl+shift+P",A,b("dispNames.systemPrint"),!1,!0)),zmail.mailOpt.isKey?(m.push(B("default",null,"previousTab",k.previousTab,A,b("dispNames.previousTab"),!1,!0),B("default",null,"nextTab",k.nextTab,A,b("dispNames.nextTab"),!1,!0),B("default",null,"closeTab",k.closeTab,A,b("dispNames.closeTab"),!1,!0),B("default",null,"closePreview",k.closePreview,A,b("dispNames.closePreview")),B("default",null,"clearMenu",k.clearMenu,A,b("dispNames.clearMenu"),!0),B("default",null,"commands","shift+forwardSlash/shift+period",A,"",!0,!0)),zmail.fromOtherService||m.push(B("default","appNavigation","toMail",k.toMail,A,b("dispNames.toMail")),B("default","appNavigation","toCalendar",k.toCalendar,A,b("dispNames.toCalendar")),B("default","appNavigation","toTask",k.toTask,A,b("dispNames.toTask")),B("default","appNavigation","toNotes",k.toNotes,A,b("dispNames.toNotes")),B("default","appNavigation","toStreams",k.toStreams,A,b("dispNames.toStreams")),B("default","appNavigation","toAttachment",k.toAttachment,A,b("dispNames.toAttachment"))),m.push(B("default","newCreation","create",k.create,A,b("dispNames.create"),!1,!0),B("default","newCreation","composeMail",k.composeMail,A,b("dispNames.composeMail"),!1,!0),B("default","newCreation","createEvent",k.createEvent,A,b("dispNames.createEvent"),!1,!0),B("default","newCreation","createTask",k.createTask,A,b("dispNames.createTask"),!1,!0),B("default","newCreation","createNotes",k.createNotes,A,b("dispNames.createNote"),!1,!0)),zmail.fromOtherService||m.push(B("default","search","genericSearch",k.search,A,b("dispNames.contextualSearch"),!1,!0),B("default","search","mailSearch",k.mailSearch,A,b("dispNames.mailSearch"),!1,!0),B("default","search","taskSearch",k.taskSearch,A,b("dispNames.taskSearch"),!1,!0),B("default","search","notesSearch",k.notesSearch,A,b("dispNames.notesSearch"),!1,!0),B("default","search","streamsSearch",k.streamsSearch,A,b("dispNames.streamsSearch"),!1,!0)),n.push(B("mail","mailLeft","gotoInbox",k.gotoInbox,u,b("dispNames.goToInbox")),B("mail","mailLeft","gotoUnreadView",k.gotoUnreadView,u,b("dispNames.goToUnreadView")),B("mail","mailLeft","gotoSentbox",k.gotoSentbox,u,b("dispNames.goToSent")),B("mail","mailLeft","gotoDraft",k.gotoDraft,u,b("dispNames.goToDraft")),B("mail","mailLeft","gotoFlagView",k.gotoFlagView,u,b("dispNames.goToFlag")),B("mail","mailLeft","gotoAllView",k.gotoAllView,u,b("dispNames.goToAllView")),B("mail","mailLeft","gotoLabelView",k.gotoLabelView,u,b("dispNames.goToLabelView")),B("mail","mailLeft","expandFolder",k.expandFolder,u,b("dispNames.expandFolder")),B("mail","mailLeft","collapseFolder",k.collapseFolder,u,b("dispNames.collapseFolder")),B("mail","mailListing","selectMail",k.selectMail,u,b("dispNames.selectMail"),!1,!0),B("mail","mailListing","selectAllMail",k.selectAllMail,u,b("dispNames.selectAllMail"),!1,!0),B("mail","mailListing","deSelectAllMail",k.deSelectAllMail,u,b("dispNames.deselectAllMail"),!1,!0),B("mail","mailListing","previousMail",k.previousMail,u,b("dispNames.previousMail")),B("mail","mailListing","nextMail",k.nextMail,u,b("dispNames.nextMail")),B("mail","mailSelection","reply",k.reply,u,b("dispNames.reply"),!1,!0),B("mail","mailSelection","replyAll",k.replyAll,u,b("dispNames.replyAll"),!1,!0),B("mail","mailSelection","forward",k.forward,u,b("dispNames.forward"),!1,!0),B("mail","mailSelection","editAsNew",k.editAsNew,u,b("dispNames.editAsNew"),!1,!0),B("mail","mailSelection","viewMenu",k.viewMenu,u,b("dispNames.viewMenu"),!1,!0),B("mail","mailSelection","labelMenu",k.labelMenu,u,b("dispNames.labelMenu"),!1,!0),B("mail","mailSelection","moveToMenu",k.moveToMenu,u,b("dispNames.moveToMenu"),!1,!0),B("mail","mailSelection","clearLabel",k.clearLabel,u,b("dispNames.clearLabel")),B("mail","mailSelection","openMailInTab",k.openMailInTab,u,b("dispNames.openMailInTab")),B("mail","mailSelection","openMailInWin",k.openMailInWin,u,b("dispNames.openMailInWindow")),B("mail","mailSelection","showOriginalMail",k.showOriginalMail,u,b("dispNames.showOriginal")),B("mail","mailSelection","reportSpam",k.reportSpam,u,b("dispNames.reportSpam")),B("mail","mailSelection","printMail",k.printMail,u,b("dispNames.printMail")),B("mail","mailSelection","markAsUnread",k.markAsUnread,u,b("dispNames.markAsUnread")),B("mail","mailSelection","markAsRead",k.markAsRead,u,b("dispNames.markAsRead")),B("mail","mailSelection","deleteMail",k.deleteMail,u,b("dispNames.deleteMail"),!1,!0),B("mail","mailSelection","archiveMail",k.archiveMail,u,b("dispNames.archiveMail")),B("mail","mailSelection","reportNotSpam","shift+N",u,b("dispNames.reportNotSpam"))),o.push(B("compose",null,"sendMail",k.sendMail,v,b("dispNames.sendMail"),!1,!0),B("compose",null,"sendMailNow",k.sendMailNow,v,b("dispNames.sendMailNow"),!1,!0),B("compose",null,"saveDraft",k.saveDraft,v,b("dispNames.saveDraft"),!1,!0),B("compose",null,"previousTab",k.previousTab,A,b("dispNames.previousTab"),!1,!0),B("compose",null,"nextTab",k.nextTab,A,b("dispNames.nextTab"),!1,!0),B("compose",null,"closeTab",k.closeTab,A,b("dispNames.closeTab"),!1,!0),B("compose",null,"clearMenu",k.clearMenu,A,b("dispNames.clearMenu"),!0),B("compose",null,"saveTemplate",k.saveTemplate,v,b("dispNames.saveTemplate"),!1,!0)),p.push(B("streams","default","AddPost","ctrl+enter","",b("dispNames.addPost"),!1,!0),B("streams","default","AddComment","ctrl+enter","",b("dispNames.addComment"),!1,!0))):m.push(B("default",null,"clearMenu","ESC",A,b("dispNames.clearMenu"),!0))};return l(k),C(k),D(),a.decodedShortcut=k,a.shortcutNames=j,a["default"]=m,a.mail=n,a.compose=o,a.streams=p,a}(window.zmshCut||{}),window.zmWinTitle=function(a){a=a||{};var b,c={},d=function(a,b){a&&a.trim()&&"function"==typeof b&&(c[a]=b)},e=function(a){"function"==typeof a&&(b=a)},f=function(a){var b=zmsuite.getAppObj(a||zmTab.currentTab),c=b&&b.obj||{};return c.defaultAppName||c.appname||""},g=function(a){var b=zmsuite.getAppObj(a||zmTab.currentTab),c=b&&b.obj||{};return c.hasOwnProperty("defaultAppName")},h=function(){var a=zmTab.currentTab,d=c[a],e=f(a);return e&&(e=e.charAt(0).toUpperCase()+e.substr(1)),d&&!g(a)?d:e?function(){return e}:b?b:function(){return""}};return a.registerTitleProvider=d,a.getTitleProvider=h,a.registerDefaultProvider=e,a}(window.zmWinTitle),window.zmWinTitle=function(a){a=a||{};var b=function(){var a=zmText.get("mailsuite","global.companyName"),b=zmText.get("mailsuite","global.productName",{
companyName:a||"Zoho"});return zmail.i18n&&zmail.i18n.zmail||b||"Zoho Mail"},c=function(){return zmail.aInfo&&zmail.aInfo[zmail.accId]&&zmail.aInfo[zmail.accId].mailId||""},d=function(){return zmail.aInfo&&zmail.aInfo[zmail.accId]&&zmail.aInfo[zmail.accId].disName||""},e=function(a){var e,f=c(),g=d();return a=a||[],"string"==typeof a&&(a=[a]),f||g?a.push(b()+" ("+(f||g)+")"):a.push(b()),e=a.join(" - "),document.title=e,$("title",document.head).text(e),e},f=function(){var b=a.getTitleProvider();return e(b())};return a.setTitle=e,a.updateTitle=f,a}(window.zmWinTitle),window.zmWinTitle=function(a){a=a||{};var b=function(){$.subscribe("mailsuite/appCreated",function(){zmWinTitle.updateTitle()}),$.subscribe("mailsuite/appOpened",function(){zmWinTitle.updateTitle()}),$.subscribe("mailsuite/appClosed",function(){zmWinTitle.updateTitle()}),$.subscribe("mail/listing/viewchanged",function(){zmWinTitle.updateTitle()}),$.subscribe("/apps/tabSwitched",function(){zmWinTitle.updateTitle()})};return a.init=b,a}(zmWinTitle),function(){var a={},b=function(a){a=a||location.hash||"";var b="",c=[];c=a.split("#"),c.shift(),c=c.join("").split("/"),b=c.shift();for(var d in c)(c[d]||"").trim()||c.splice(d,1);return{key:b,params:c}},c=function(a,b){if(a=a||"",b=b||"","string"!=typeof b){for(var c in b)(b[c]||"").trim()||b.splice(c,1);b=b.join("/")}b&&"/"!==b.charAt(0)&&(b="/"+b);var d="#"+a+b;return d},d=function(b,c){var d=!1,e=!0;return b&&$(a).trigger("hash/"+b,{key:b,params:c,handled:function(){d=!0},preventDefaultAction:function(){e=!1}}),{handled:d,defaultAction:e}},e=function(){var a=b(location.hash),c={handled:!1,defaultAction:!0};c=d(a.key,a.params),c.defaultAction===!0&&$.publish("mailsuite/hashurl/changed",{hashKey:a.key,hashParams:a.params,trigger:!0})},f=function(b,c){b&&"function"==typeof c&&"function"==typeof c._proxyCallback&&$(a).off("hash/"+b,c._proxyCallback)},g=function(b,c){if(b&&"function"==typeof c){f(b,c);var d=function(a,b){var d=c(b.key,b.params);b.handled(),d.defaultAction===!1&&b.preventDefaultAction()};c._proxyCallback=d,d._originalCallback=c,$(a).on("hash/"+b,d)}},h=function(a){var b=location.hash,c=function(){setTimeout(function(){$(window).off("hashchange",e).on("hashchange",e)},0)};b!==a&&($(window).off("hashchange",e).on("hashchange",c),location.hash=a,setTimeout(function(){$(window).off("hashchange",c)},0))},i=function(a,b){var d=c(a,b);h(d)},j=function(){h("")},k=function(){$(window).off("hashchange",e).on("hashchange",e)};window.zmHash=window.zmHash||{};var l=window.zmHash;l.register=g,l.unregister=f,l.setHash=i,l.clearHash=j,l.decode=b,l.encode=c,k()}(),function(){var a,b=window,c="zmail.Core.Namespaces",d=function(a){a=a||"";var c,d,e=[],f=b;if(a)return c=a.split("."),c.forEach(function(a){d=typeof f,"object"!==d&&"function"!==d||(d=typeof f[a],"undefined"===d&&(f[a]={}),f=f[a],e.push(a),f.__namespace=e.join("."))}),f},e=function(a,c){a=a||"",c=c||{};var d,e=b;if(a)return d=a.split("."),d.forEach(function(a){e&&(e=e[a])}),e&&!e.__namespace&&c.avoidObject===!0&&(e=void 0),e},f=function(a){return e(a,{avoidObject:!0})},g=function(a,b){a=a||"";var c,d,f;if(a)return c=a.split("."),f=c.splice(c.length-1,1),d=e(a),d[f]=b,b},h=function(){a=d(c)};h(),a.create=d,a.replace=g,a.acquire=f,a.get=e}(),function(){var a=zmail.Core.Namespaces,b=a.create("zmail.Utils.EmailValidator"),c={COMMENT_PART_ATSTART:/^\([^)]*\)/gim,COMMENT_PART_ATEND:/\([^)]*\)$/gim,LOCAL_PART_ALPNUM:/[A-Za-z0-9]/gim,LOCAL_PART_ALLOWED_CHARS:/[!#$%&'*+\-\/=?^_`{|}~]/gim,LOCAL_PART_QUOTED_STRING_ALLOWED_CHARS:/[ "(),:;\\<>@[\\\]]/gim,LOCAL_PART_ALLOWED_UNICODE_CHARS:/[^\u0000-\u007F]/gim,LOCAL_PART_PERIOD_CHAR:/[.]/gim,LOCAL_PART_QUOTED_STRING_FETCH:/(?:\."(.*)"\.)/gim,LOCAL_PART_QUOTED_STRING:/(\.".*"\.)/gim,LOCAL_PART_CONSECUTIVE_PEROID_CHARS:/\.{2,}/gim,DOMAIN_PART_IPV4_CHECK:/\[((?:\d{1,3}\.){3}\d{1,3})\]/gim,DOMAIN_PART_IPV6_CHECK:/\[IPV6:[\d.:a-f]+\]/gim,DOMAIN_SUBPARTS_CHECK:/^(?=[^\-.\s]{1})[^\s.]+(?![^-.\s]{1})$/gim},d={INVALID_LENGTH:[1,"Length of Email Address is invalid"],MISSING_ATTHERATE:[2,"An Email address should have a '@' character"],INVALID_DOMAINLENGTH:[3,"Length of Domain part (after @) of email address is invalid"],INVALID_LOCALPARTLENGTH:[4,"Length of Local part (before @) of email address is invalid"],INVALID_DOMAINPART:[5,"Domain part (after @) of email address is invalid"],INVALID_PERIODUSAGE:[6,"Peroid character (.) usage is invalid in Local part"],INVALID_QUOTE_ENCLOSED_FORMAT:[7,"The quote enclosed local part has character which are now allowed"],INVALID_QUOTED_PART:[8,"The quoted string in local part has characters which are not allowed"],INVALID_LOCALPART_CHARACTERS:[9,"The local part of email has characters which are not allowed"]},e=null,f=function(a){e=a||null},g=function(a){return a=a||"",a=a.replace(c.COMMENT_PART_ATSTART,""),a=a.replace(c.COMMENT_PART_ATEND,"")},h=function(){var a=function(a){return a=a||"",a=a.replace(c.LOCAL_PART_ALPNUM,""),a=a.replace(c.LOCAL_PART_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_QUOTED_STRING_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_ALLOWED_UNICODE_CHARS,""),a=a.replace(c.LOCAL_PART_PERIOD_CHAR,""),0===a.length},b=function(a){return a=a||"",a=a.replace(c.LOCAL_PART_ALPNUM,""),a=a.replace(c.LOCAL_PART_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_ALLOWED_UNICODE_CHARS,""),a=a.replace(c.LOCAL_PART_PERIOD_CHAR,""),0===a.length},e=function(a){if(a=a||"",'"'===a.charAt(0)&&'"'===a.charAt(a.length-1))return!0},h=function(a){return a=a||"",null!==a.match(c.LOCAL_PART_QUOTED_STRING)},i=function(a){return a=a||"",a.match(c.LOCAL_PART_QUOTED_STRING_FETCH)[0]},j=function(a){return a=a||"",a.replace(c.LOCAL_PART_QUOTED_STRING,"")},k=function(a){return a=a||"",a.length>0},l=function(a){a=a||"";var b=!0;return a.indexOf(".")===-1?b:("."===a.charAt(0)||"."===a.charAt(a.length-1)?b=!1:null!==a.match(c.LOCAL_PART_CONSECUTIVE_PEROID_CHARS)&&(b=!1),b)},m=function(c){c=c||"";var m,n=!0;if(k(c)){if(c=g(c),!l(c))return f(d.INVALID_PERIODUSAGE),n=!1;if(e(c))return c=c.substr(1,c.length-2),n=a(c),n||f(d.INVALID_QUOTE_ENCLOSED_FORMAT),n;h(c)?(m=i(c),c=j(c),a(m)?b(c)||(n=!1,f(d.INVALID_LOCALPART_CHARACTERS)):(n=!1,f(d.INVALID_QUOTED_PART))):(n=b(c),n||f(d.INVALID_LOCALPART_CHARACTERS))}else f(d.INVALID_LOCALPARTLENGTH),n=!1;return n};return{validate:m}}(),i=function(){var a=function(a){a=a||"";var b=c.DOMAIN_PART_IPV4_CHECK;return null!==a.match(b)},b=function(a){var b=c.DOMAIN_PART_IPV6_CHECK;return null!==b.exec(a)},e=function(a,b){var d=a.split(".");if(!b.allowLocalDomains&&d.length<2)return!1;var e,f,g,h=c.DOMAIN_SUBPARTS_CHECK,i=!0;for(e=0,f=d.length;e<f;e++)if(g=d[e],h.lastIndex=0,null===g.match(h)){i=!1;break}return i},h=function(a){return a=a||"",a.length>0},i=function(c,i){c=c||"";var j,k,l=!0;return h(c)?(c=g(c),j=a(c),k=b(c),j||k||(l=e(c,i),l||f(d.INVALID_DOMAINPART))):(f(d.INVALID_DOMAINLENGTH),l=!1),l};return{validate:i}}(),j=function(a){return a=a||"",a.length>0&&a.length<255},k=function(a,b){b=b||{},f(),a=a||"";var c,g,k,l=!0;k=a.lastIndexOf("@"),j(a)?k===-1?(f(d.MISSING_ATTHERATE),l=!1):(c=a.substr(0,k),g=a.substring(k+1),l=h.validate(c,b)&&i.validate(g,b)):(f(d.INVALID_LENGTH),l=!1);var m={};return m.status=l,l||(m.errorCode=e[0],m.errorMessage=e[1]),m};b.validate=k}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=zmail.Core.Namespaces,b=a.create("zmail.Utils.DeferredCollection"),c=function(){function a(b){_classCallCheck(this,a);var c=this;b=b||{},c._collection={},c._keepDeferreds=b.keepDeferreds||!1}return _createClass(a,[{key:"has",value:function(a){var b=this;return a=(a||"").trim(),!!a&&"undefined"!=typeof b._collection[a]}},{key:"get",value:function(a,b){var c=this;return b=b||{},(a=(a||"").trim())?(c._collection[a]||(c._collection[a]=$.Deferred(),c._keepDeferreds||c._collection[a].always(function(){c._collection[a]=void 0})),c._collection[a]):null}},{key:"clear",value:function(a){var b=this,c=null;return(a=(a||"").trim())?(b._collection[a]&&(c=b._collection[a],b._collection[a]=void 0,delete b._collection[a]),c):null}}]),a}(),d=function(a){return new c(a)};b.create=d}(),function(){var a,b=zmail.Core.Namespaces,c=b.create("zmail.Utils.FeatureUtil"),d=function(){a=[],zmail.isFuji&&(a=["FeatureCards","topbar:apps","SiteTour","ForumAccess"])},e=function(b){var c=!1;return"undefined"!=typeof b&&(c=a.indexOf(b)>-1),c};c.isHidden=e,d()}(),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=this.Map=function(a){return this instanceof c?(a=a||{},this.hash={},void(this.sort=a.sort===!0)):new c(a)};c.prototype={add:function(a,b){if(!a||!b)return this;a=a.toLowerCase();var c=this.hash,d=c[a]||(c[a]=[]);return d.indexOf(b)===-1&&(d.push(b),this.sort&&d.sort()),this},get:function(a){b.isArray(a)||(a=[a]);var c=this.hash;return a.reduce(function(b,d){return d=d.toLowerCase(),b.concat(c[a]||[])},[])},getAll:function(){var a=this;return Object.keys(this.hash).reduce(function(b,c){return b.concat(a.get(c))},[])},remove:function(a,b){a=a.toLowerCase();var c,d=this.hash[a];return d&&d.length&&(c=d.indexOf(b),c>=-1&&d.splice(c,1)),this},update:function(a,b,c){return this.remove(a,b).add(a,c)}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=a("zmail.Maps.Map"),d=this.IndexedMap=function(){return this instanceof d?(this.charMap=new c({sort:!0}),void(this.stringMap=new c({sort:!0}))):new d};d.prototype={add:function(a,b){return a&&b&&(a=a.toLowerCase(),this.charMap.add(a.charAt(0),a),this.stringMap.add(a,b)),this},getValues:function(a){var b=this.stringMap;return a.reduce(function(a,c){return a.concat(b.get(c))},[])},get:function(a){b.isArray(a)||(a=[a]);var c=this;return this.getValues(a.reduce(function(a,b){b=b.toLowerCase();var d=c.charMap.get(b.charAt(0));return b.length>=2&&(d=d.filter(function(a){return 0===a.indexOf(b)})),a.concat(d)},[]))},getAll:function(){var a=this.charMap.getAll();return this.getValues(a)},remove:function(a,b){return a=a.toLowerCase(),this.charMap.remove(a.charAt(0),a),this.stringMap.remove(a,b),this},update:function(a,b,c){return this.remove(a,b).add(a,c),this}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=a("zmail.Maps.Map"),d=this.DelimitedMap=function(a){a=a||{},this.map=new c,this.delimiter=a.delimiter||"-"};d.prototype={delimitedNames:function(a){var b=this.delimiter,c=a.split(b),d=[];return c.map(function(a){return d.push(a),d.join(b)})},add:function(a,b){var c=this.delimitedNames(a),d=this.map;return c.forEach(function(a){d.add(a,b)}),this},get:function(a){var c=this.delimitedNames(a),d=this.map;return b.unique(c.reduce(function(a,b){return a.concat(d.get(b))},[]))},remove:function(a,b){var c=this.delimitedNames(a),d=this.map;return c.forEach(function(a){d.remove(a,b)}),this}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=this.MapKeeper=function(a){return this instanceof c?void(this.maps=a):new c(a)};c.prototype={add:function(a){var b=this.maps;for(var c in a){var d=b[c];if(d){var e=a[c];d.add(e.name,e.value)}}return this},get:function(a){var c=this.maps,d=[];for(var e in a){var f=c[e],g=a[e];f&&g&&(d=d.concat(f.get(g)))}return b.unique(d)}}});