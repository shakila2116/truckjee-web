window.zmAdHocSettings=function(a){"use strict";a=a||{};var b={STRING:"STRING",JSON:"JSON"},c={USER:"USER",ACCOUNT:"ACCOUNT"},d={siteTour:{"default":"unvisited",values:["visited","unvisited","v1","v2","whatsnew"]},appTour:{dataType:b.JSON,structure:{mail:{"default":"unvisited",values:["v1","v2","unvisited"]},compose:{"default":"unvisited",values:["v1","v2","unvisited"]},notes:{"default":"unvisited",values:["v1","v2","unvisited"]},task:{"default":"unvisited",values:["v1","v2","unvisited"]},calendar:{"default":"unvisited",values:["v1","v2","unvisited"]},streams:{"default":"unvisited",values:["v1","v2","unvisited"]},attachmentViewer:{"default":"unvisited",values:["v1","v2","unvisited"]},setting:{"default":"unvisited",values:["v1","v2","unvisited"]}},templateName:"AppTour"},theme:{"default":"theme1",values:["theme1","theme2","theme3","theme4","theme5","theme6","theme7","theme8","theme9"]},leftOrder:{"default":"zmStreamTree,zmlTreeH,zmlSTreeH,zmllabelH,zmlviewH,zmlSSrchTreeH",values:""},appOrder:{"default":"mail,cal,task,notes,contacts,links",values:""},lastUsedUI:{"default":"unknown",values:["unknown","biz","zm","zm_only"]},font:{"default":"Lato",values:["Lato","PT Sans","Arial"]},uiState:{dataType:b.JSON},lPageType:{"default":"none",values:""},composeType:{"default":"1",values:["1","2"]},dailyTour:{"default":"",values:""},streamsListType:{"default":"default",values:["default","grid","list"]},suppressedMessagesState:{dataType:b.JSON,structure:{conversationAction:{"default":"on",values:["on","off"]},mailShareTip:{"default":"on",values:["on","off"]},conversationShareWarning:{"default":"on",values:["on","off"]}},templateName:"SuppressedMessagesState"},leftLayerState:{dataType:b.JSON},mailViewSettings:{dataType:b.JSON,structure:{headerState:{"default":"c",values:["e","c"]}},templateName:"MailViewSettings"},helperBlockVisibility:{"default":"1",values:["0","1"]},conversationActionType:{"default":"1",values:["1","2"]},markConversationRead:{"default":"0",values:["0","1"]},bizBannerMsg:{"default":"no_msg",values:""},accountsLhsOrder:{"default":"-no_acc-",values:""},whatsNewVersion:{dataType:b.JSON},listingDisplayDensity:{"default":"0",values:["0","1"]},mailSoundNotifier:{"default":"0",values:["0","1","2","3","4","5"]},projectInteg:{dataType:b.JSON}};return a.initData=d,a.dataTypes=b,a.exclusivityTypes=c,a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";a=a||{};var b=zmail.conPath+"/settings.do",c=function(a,c,d,e){a=a||{},c=c||function(){},d=d||function(){},e=e||{},zmAjq.XHR({u:b,p:a,fn:c,efn:d,ep:e,t:"post"})},d=function(a){return"object"==typeof a?Object.keys(a):[]},e=function(a,b){var c=[];if(a&&b&&a.constructor===Object&&b.constructor===Object){if(d(a).length!==d(b).length)return!1;for(var e in a)a.hasOwnProperty(e)&&(b.hasOwnProperty(e)&&typeof a[e]==typeof b[e]||c.push(e))}return 0===c.length},f=function(a){a=a||{};var b={},c=[],d=function(a){for(var e in a)if(e.indexOf(".")!==-1)window.console.log("The JSON object key '"+e+"' cannot contain the character '.' !");else{if(c.push(e),a[e]&&a[e].constructor===Object)d(a[e]);else{var f=a[e];f&&f.constructor instanceof Array&&(f=JSON.stringify(f)),b[c.join(".")]=f}c.pop()}};return d(a),b},g=function(a){var b={};for(var c in a){var d=c.split("."),e=d.length||0,f=a[c];if(1===e)b[c]=f;else if(e>1){for(var g,h=d[e-1],i=b,j=0;j<e-1;j++)g=d[j],i[g]=i[g]||{},i=i[g];i[h]=f}}return b},h=function(a,b){a=a||{},b=b||{};var c={};a=f(a),b=f(b);for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c=g(c)};return a.ajax=c,a.hasSameStructure=e,a.flattenJSON=f,a.unflattenJSON=g,a.mergeJSON=h,a.objectKeys=d,a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";a=a||{};var b={},c=function(a,c){"function"==typeof c&&$(b).on(a,c)},d=function(a,c){"function"==typeof c&&$(b).off(a,c)},e=function(a,c){setTimeout(function(){$(b).trigger(a,c)},0)};return a.subscribe=c,a.unsubscribe=d,a.publish=e,a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";function b(a,b){this.name=a,this.type=d.STRING,this.exclusivity=e.USER,this["default"]="",this.currentValue="",this.validValues="",this.wrapper=!1,this.parent=null,this.templateName="",b&&this.initFromConfig(b)}a=a||{};var c={},d=a.dataTypes||{},e=a.exclusivityTypes||{};b.prototype={initFromConfig:function(a){var c=this;if(a=a||{},c.wrapper=a.isWrapper||!1,c.parent=a.parent||null,a.dataType){if(!(a.dataType in d))throw new Error("data type of setting is not valid !");c.type=a.dataType}else if(a.structure){if(a.structure.constructor!==Object)throw new Error("'structure' property should be an 'Object' !");c.type=d.JSON}else if("undefined"!=typeof a["default"]){if(a["default"].constructor!==String)throw new Error("'default' property should be a 'String' !");c.type=d.STRING}else c.type=d.STRING;if(a.exclusiveTo){if(!(a.exclusiveTo in e))throw new Error("exclusivity type of setting is not valid !");c.exclusivity=a.exclusiveTo}else c.exclusivity=c.parent&&c.parent.exclusivity||e.USER;if(c.type!==d.JSON||null!==c.parent&&c.parent.wrapper!==!0||c.wrapper!==!1||(c.templateName=a.templateName||""),c.type===d.STRING&&(c["default"]=a["default"]||"",c.currentValue=c["default"],c.validValues=a.values||null),a.hasOwnProperty("sync")?c.sync=a.sync:c.sync=!0,c.type===d.JSON){for(var f in a.structure){var g=a.structure[f];g.parent=c;var h=new b(f,g);c.children=c.children||{},c.children[f]=h}c["default"]=c.toJSON()[c.name],c.currentValue=c["default"]}},toJSON:function(b){b=b||{};var c=this,f=b.fromParent||!1,g=b.exclusiveTo&&[b.exclusiveTo]||[e.USER,e.ACCOUNT];if(c.type===d.JSON&&c.templateName){var h={};for(var i in c.children){b.fromParent=!0;var j=c.children[i];if(j.type===d.JSON||g.indexOf(j.exclusivity)!==-1){var k=j.toJSON(b);(k&&a.objectKeys(k).length||j.type===d.STRING)&&(h[j.name]=k)}}if(!c.wrapper&&null===c.parent){var l={};l[c.name]=h,h=l}return h}if(c.type===d.JSON){var m={};return m[c.name]={},g.indexOf(c.exclusivity)!==-1&&(m[c.name]=c.currentValue||{}),m}if(c.type===d.STRING){if(f)return c.currentValue;var n={};return n[c.name]=c.currentValue,n}},setJSON:function(a){var b=this;if(a)if(a.constructor===Object&&b.templateName){for(var c in a)b.children[c]&&b.children[c].setJSON(a[c]);b.currentValue=b.toJSON()[b.name]}else a.constructor===Object?b.currentValue=JSON.parse(JSON.stringify(a)):b.currentValue=a}};var f=function(){var d,e;for(d in a.initData)e=new b(d,a.initData[d]),c[d]=e};return f(),a.settings=c,a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";a=a||{};var b=a.settings||{},c=a.dataTypes||{},d=a.hasSameStructure,e=function(a,d){var e=b[a];if(e){if(e.type===c.JSON){var f;return f=d?e.toJSON({exclusiveTo:d}):e.toJSON(),f=f[a]||{}}return e.type===c.STRING?e.currentValue:void 0}},f=function(){var a={};for(var c in b)a[c]=e(c);return a},g=function(a){var d=b[a];return d.type===c.JSON?$.extend({},d["default"]):d.type===c.STRING?d["default"]:void 0},h=function(a){var d=b[a];return d.validValues?d.type===c.STRING?$.extend([],d.validValues):void 0:d.type===c.JSON&&d.children?d.children:""},i=function(c,f,h){h=h||{};var i=b[c];if(f=f||{},!h.initialize&&i.templateName&&!d(g(c),f))return!1;if(!i.templateName)return i.setJSON(f),!0;var j=e(c);i.setJSON(f);var k=e(c);j=a.flattenJSON(j),k=a.flattenJSON(k);var l=!1;for(var m in j)j[m]!==k[m]&&(l=!0);return l},j=function(a,c){var d=b[a],e=d.validValues||[];return c=c||"",c.constructor===String&&(c=c.trim()),(!e.length||e.indexOf(c)!==-1)&&(d.currentValue!==c&&(d.currentValue=c,!0))},k=function(d,f,g){var h=b[d],k=!1;g=g||{};var l=!g.hasOwnProperty("notify")||g.notify,m=!g.hasOwnProperty("throttle")||g.throttle,n=!g.hasOwnProperty("sync")||g.sync;if(!h)return!1;var o,p=e(d);if(h.type===c.JSON){if("object"!=typeof f)try{f=JSON.parse(f)}catch(q){}k=i(d,f,{initialize:g.initialize})}else h.type===c.STRING&&(k=j(d,f,{initialize:g.initialize}));if(o=e(d),k){var r={name:d,oldValue:p,value:o,throttleSave:m};l&&a.publish("settingschanged",r),n&&a.publish("internal/settingschanged",r)}return k};return a.getAll=f,a.get=e,a.set=k,a.getDefault=g,a.getValidValues=h,a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";a=a||{};var b=function(b,c){a.publish("settingschanged/"+c.name,c)},c=function(){a.subscribe("settingschanged",b)};return c(),a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";a=a||{};var b=a.dataTypes||{},c=a.exclusivityTypes||{},d=5e3,e={},f="",g=a.subscribe,h=function(b,d){var e={mode:"set",name:b.name,value:b.currentValue};b.exclusivity===c.ACCOUNT&&(e.accountID=zmail.accId);var f=function(){a.set(b.name,d.oldValue,{sync:!1,notify:!1,throttle:!1})};a.ajax(e,void 0,f)},i=function(b,d){var e=b.toJSON({exclusiveTo:c.USER})[b.name],f=b.toJSON({exclusiveTo:c.ACCOUNT})[b.name],g=a.objectKeys(e).length>0,h=a.objectKeys(f).length>0,i={name:b.name,ignoreTemplate:!1,template:b.templateName||"no_template"};b.templateName||(i.ignoreTemplate=!0),h&&(i.accountID=zmail.accId),g&&h?(i.userValue=JSON.stringify(e),i.accountValue=JSON.stringify(f),i.mode="setFullJSON"):(i.value=JSON.stringify(g?e:f),i.mode="setJSON");var j=function(){a.set(b.name,d.oldValue,{sync:!1,notify:!1,throttle:!1})};a.ajax(i,void 0,j)},j=function(c,f){var g=f.name,k=a.settings[g];if(k&&k.sync){var l;k.type===b.JSON?l=i:k.type===b.STRING&&(l=h),f.throttleSave&&(e[g]||(e[g]=_.throttle(function(a,b){b.throttleSave=!1,j(null,b)},d)),l=e[g]),l(k,f)}},k=function(b,c){f="PENDING";var d=a.mergeJSON(b,c);for(var e in d)a.set(e,d[e],{sync:!1,notify:!0,initialize:!0});a.publish("settingsloaded",{success:!0}),f="SUCCESS"},l=function(){var b={mode:"getall",accountID:zmail.accId},c=function(a){a=a||{};var b=a.user||{},c=a.account||{};k(b,c),f="SUCCESS"},d=function(){a.publish("settingsloaded",{success:!1}),f="FAIL"};a.ajax(b,c,d),f="PENDING"},m=function(){a.subscribe("internal/settingschanged",j)},n=function(a,b){a&&"function"==typeof b&&("settingsloaded"===a&&("SUCCESS"===f?b(null,{success:!0}):"FAIL"===f&&b(null,{success:!1})),g(a,b))};return a.subscribe=n,a.fetch=l,a.fetchFromObject=k,m(),a}(window.zmAdHocSettings),window.zmAdHocSettings=function(a){"use strict";a=a||{};var b={},c=["get{{SETTING}}","set{{SETTING}}","get{{SETTING}}Default","get{{SETTING}}ValidValues","subscribe{{SETTING}}Change","unsubscribe{{SETTING}}Change"],d=/\{\{SETTING\}\}/,e=function(b,c){switch(b){case"get{{SETTING}}":return function(b){b=b||{};var d=b.exclusivity;return a.get(c,d)};case"set{{SETTING}}":return function(b,d){return a.set(c,b,d)};case"get{{SETTING}}Default":return function(){return a.getDefault(c)};case"get{{SETTING}}ValidValues":return function(){return a.getValidValues(c)};case"subscribe{{SETTING}}Change":return function(b){a.subscribe("settingschanged/"+c,b)};case"unsubscribe{{SETTING}}Change":return function(b){a.unsubscribe("settingschanged/"+c,b)}}},f=function(){var f,g,h=function(a){var c=a.replace(d,g);b[c]=e(a,f)};for(var i in a.settings)f=i,g=f.charAt(0).toUpperCase()+f.substr(1),c.forEach(h)},g=function(){b.subscribe=a.subscribe,b.unsubscribe=a.unsubscribe},h=function(){b.SETTING_DATA_TYPES=$.extend({},a.dataTypes),b.SETTING_EXCLUSIVE_TYPES=$.extend({},a.exclusivityTypes)},i=function(){b.fetch=a.fetch,b.fetchFromObject=a.fetchFromObject,b.getAll=a.getAll},j=function(){h(),g(),f(),i()};return j(),b}(window.zmAdHocSettings);