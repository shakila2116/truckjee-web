"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}!function(){var a,b,c=zmail.Core.Namespaces,d=!1,e=function(){return a||(a=zmText.get("smiley","smileys.tooltips")),b||(b={":smile:":{"class":"smile",category:"smiley"},":)":{"class":"smile",category:"smiley"},":-)":{"class":"smile",category:"smiley"},":happy:":{"class":"happy",category:"smiley"},":joy:":{"class":"joy",category:"smiley"},":D":{"class":"happy",category:"smiley"},":grinning:":{"class":"grinning",category:"smiley"},":cool:":{"class":"cool",category:"smiley"},"B-)":{"class":"cool",category:"smiley"},":love:":{"class":"love",category:"smiley"},":xs":{"class":"love",category:"smiley"},":curious:":{"class":"curious",category:"smiley"},":awe:":{"class":"awe",category:"smiley"},":o":{"class":"awe",category:"smiley"},":thinking:":{"class":"thinking",category:"smiley"},":search:":{"class":"search",category:"smiley"},":idea:":{"class":"idea",category:"smiley"},"*-:)":{"class":"idea",category:"smiley"},":wink:":{"class":"wink",category:"smiley"},";)":{"class":"wink",category:"smiley"},":razz:":{"class":"razz",category:"smiley"},":relaxed:":{"class":"relaxed",category:"smiley"},":angel:":{"class":"peace",category:"smiley"},":peace:":{"class":"peace",category:"smiley"},":yummy:":{"class":"yummy",category:"smiley"},"(a)":{"class":"peace",category:"smiley"},":yuck:":{"class":"yuck",category:"smiley"},":sad:":{"class":"sad",category:"smiley"},":(":{"class":"sad",category:"smiley"},":-(":{"class":"sad",category:"smiley"},":blush:":{"class":"blush",category:"smiley"},":upset:":{"class":"upset",category:"smiley"},":anxious:":{"class":"anxious",category:"smiley"},":worry:":{"class":"worry",category:"smiley"},"D:":{"class":"anxious",category:"smiley"},":stressed-out:":{"class":"stressed-out",category:"smiley"},":-s":{"class":"stressed-out",category:"smiley"},":angry:":{"class":"angry",category:"smiley"},":tensed:":{"class":"tensed",category:"smiley"},"X-(":{"class":"angry",category:"smiley"},":tired:":{"class":"tired",category:"smiley"},":bored:":{"class":"bored",category:"smiley"},":sleepy:":{"class":"sleepy",category:"smiley"},":jealous:":{"class":"jealous",category:"smiley"},"|-)":{"class":"sleepy",category:"smiley"},":evil:":{"class":"evil",category:"smiley"},":facepalm:":{"class":"facepalm",category:"smiley"},":doubt:":{"class":"doubt",category:"smiley"},":surprise:":{"class":"surprise",category:"smiley"},":faint:":{"class":"faint",category:"smiley"},":headache:":{"class":"headache",category:"smiley"},"(6.6)":{"class":"faint",category:"smiley"},":sick:":{"class":"sick",category:"smiley"},":injured:":{"class":"injured",category:"smiley"},"+o(":{"class":"sick",category:"smiley"},":neutral:":{"class":"neutral",category:"smiley"},":smirk:":{"class":"smirk",category:"smiley"},":/":{"class":"smirk",category:"smiley"},":shutup:":{"class":"keep-quiet",category:"smiley"},":feeling-warm:":{"class":"feeling-warm",category:"smiley"},":-#":{"class":"keep-quiet",category:"smiley"},":feeling-cold:":{"class":"feeling-cold",category:"smiley"},":thumbsup:":{"class":"thumbsup",category:"smiley"},":thumbsdown:":{"class":"thumbsdown",category:"smiley"},":namaste:":{"class":"namaste",category:"smiley"},"(y)":{"class":"thumbsup",category:"smiley"},"(n)":{"class":"thumbsdown",category:"smiley"},":super:":{"class":"super",category:"smiley"},":victory:":{"class":"victory",category:"smiley"},":yoyo:":{"class":"yoyo",category:"smiley"},":raising-hand:":{"class":"raising-hand",category:"smiley"},":clap:":{"class":"clap",category:"smiley"},":bye-bye:":{"class":"bye-bye",category:"smiley"},":thug:":{"class":"fist",category:"smiley"},":fist:":{"class":"fist",category:"smiley"},":flexed-biceps:":{"class":"biceps",category:"smiley"},":birthday:":{"class":"birthday",category:"celebration"},":champagne:":{"class":"champagne",category:"celebration"},":party:":{"class":"party",category:"celebration"},":coffee-cup:":{"class":"coffee-cup",category:"celebration"},":food:":{"class":"food",category:"celebration"},":chicken:":{"class":"chicken",category:"celebration"},":gift-box:":{"class":"gift-box",category:"celebration"},":peanuts:":{"class":"peanuts",category:"celebration"},":singing:":{"class":"singing",category:"celebration"},":break-boy:":{"class":"break-boy",category:"celebration"},":break-girl:":{"class":"break-girl",category:"celebration"},":woman-dancing:":{"class":"woman-dancing",category:"celebration"},":man-dancing:":{"class":"man-dancing",category:"celebration"},":fireworks:":{"class":"fireworks",category:"celebration"},":christmas-tree:":{"class":"christmas-tree",category:"celebration"},":santa-hat:":{"class":"santa-hat",category:"celebration"},":new-year:":{"class":"new-year",category:"celebration"},":gold-medal:":{"class":"gold-medal",category:"sports"},":silver-medal:":{"class":"silver-medal",category:"sports"},":bronze-medal:":{"class":"bronze-medal",category:"sports"},":running:":{"class":"running",category:"sports"},":hurdles:":{"class":"hurdles",category:"sports"},":high-jump:":{"class":"high-jump",category:"sports"},":long-jump:":{"class":"long-jump",category:"sports"},":yoga:":{"class":"yoga",category:"sports"},":karate:":{"class":"karate",category:"sports"},":male-cyclist:":{"class":"man-cycling",category:"sports"},":female-cyclist:":{"class":"woman-cycling",category:"sports"},":female-runner:":{"class":"woman-running",category:"sports"},":male-runner:":{"class":"man-running",category:"sports"},":male-swimmer:":{"class":"man-swimming",category:"sports"},":female-swimmer:":{"class":"woman-swimming",category:"sports"},":football:":{"class":"football",category:"sports"},":foosball:":{"class":"foosball",category:"sports"},":basketball:":{"class":"basketball",category:"sports"},":volleyball:":{"class":"volleyball",category:"sports"},":tennis:":{"class":"tennis",category:"sports"},":badminton:":{"class":"badminton",category:"sports"},":table-tennis:":{"class":"table-tennis",category:"sports"},":cricket:":{"class":"cricket",category:"sports"},":baseball:":{"class":"baseball",category:"sports"},":hockey:":{"class":"hockey",category:"sports"},":golf:":{"class":"golf",category:"sports"},":snooker:":{"class":"snooker",category:"sports"},":chess:":{"class":"chess",category:"sports"},":football-player:":{"class":"football-player",category:"sports"},":basketball-player:":{"class":"basketball-player",category:"sports"},":male-volleyball-player:":{"class":"male-volleyball-player",category:"sports"},":female-volleyball-player:":{"class":"female-volleyball-player",category:"sports"},":female-tennis-player:":{"class":"female-tennis-player",category:"sports"},":male-tennis-player:":{"class":"male-tennis-player",category:"sports"},":badminton-player:":{"class":"badminton-player",category:"sports"},":male-TT-player:":{"class":"male-tabletennis-player",category:"sports"},":female-TT-player:":{"class":"female-tabletennis-player",category:"sports"},":batsman:":{"class":"batsman",category:"sports"},":bowler:":{"class":"bowler",category:"sports"},":batter:":{"class":"batter",category:"sports"},":pitcher:":{"class":"pitcher",category:"sports"},":hockey-player:":{"class":"hockey-player",category:"sports"},":golfer:":{"class":"golfer",category:"sports"},":gymnast:":{"class":"gymnast",category:"sports"},":snooker-player:":{"class":"snooker-player",category:"sports"},":chess-player:":{"class":"chess-player",category:"sports"},":pole-vault:":{"class":"pole-vault",category:"sports"},":discus-throw:":{"class":"discus-throw",category:"sports"},":hammer-throw:":{"class":"hammer-throw",category:"sports"},":javelin-throw:":{"class":"javelin-throw",category:"sports"},":shotput-throw:":{"class":"shotput-throw",category:"sports"},":boxing:":{"class":"boxing",category:"sports"},":fencing:":{"class":"fencing",category:"sports"},":judo:":{"class":"judo",category:"sports"},":weightlifting:":{"class":"weightlifting",category:"sports"},":wrestling:":{"class":"wrestling",category:"sports"},":archery:":{"class":"archery",category:"sports"},":shooting:":{"class":"shooting",category:"sports"},":equestrian:":{"class":"equestrian",category:"sports"},":canoeing:":{"class":"canoeing",category:"sports"},":diving:":{"class":"diving",category:"sports"},":rhythmic-gymnastics:":{"class":"rhythmic-gymnastics",category:"sports"},":flag:":{"class":"flag",category:"sports"},":target:":{"class":"target",category:"sports"},":medicine:":{"class":"medicine",category:"medicine"},":first-aid-box:":{"class":"first-aid-box",category:"medicine"},":fire-extinguisher:":{"class":"fire-extinguisher",category:"medicine"},":fire:":{"class":"fire",category:"medicine"},":poop:":{"class":"poop",category:"medicine"},":bicycle:":{"class":"bicycle",category:"travel"},":sports-bike":{"class":"sports-bike",category:"travel"},":cruiser-bike:":{"class":"cruiser-bike",category:"travel"},":motor-scooter:":{"class":"motor-scooter",category:"travel"},":car:":{"class":"car",category:"travel"},":taxi:":{"class":"taxi",category:"travel"},":bus:":{"class":"bus",category:"travel"},":train:":{"class":"train",category:"travel"},":police-car:":{"class":"police-car",category:"travel"},":ambulance:":{"class":"ambulance",category:"travel"},":fire-engine:":{"class":"fire-engine",category:"travel"},":aeroplane:":{"class":"aeroplane",category:"travel"},":passenger-ship:":{"class":"passenger-ship",category:"travel"}}),d=!0,b},f=function(a,b){var c=" "+$(b).data("text")+" ";zmMention.insertAtCursor(a,c),$(a).focus(),$("#zm_dropDown").remove()},g=function(c,g,h){var i={};d||e(),i=b;var j,k=[],l="",m="",n=_zm.getDOM(["LI",{attrs:{style:"padding-top:5px"},child:[["DIV",{attrs:{"class":"smileydivmn"},child:[["DIV",{attrs:{"class":"smileydiv zmsc_smiley"}}],["DIV",{attrs:{"class":"smileydiv SC_dyn zmsc_celebration"}}],["DIV",{attrs:{"class":"smileydiv SC_dyn zmsc_sports"}}],["DIV",{attrs:{"class":"smileydiv SC_dyn zmsc_medicine"}}],["DIV",{attrs:{"class":"smileydiv SC_dyn zmsc_travel"}}]]}],["UL",{attrs:{"class":"smileyCateg"},child:[["LI",{attrs:{"class":"sel","data-category":"smiley"},child:[["EM",{attrs:{"class":"zcslymsg-smile"}}]]}],["LI",{attrs:{"data-category":"celebration"},child:[["EM",{attrs:{"class":"zcslymsg-birthday"}}]]}],["LI",{attrs:{"data-category":"sports"},child:[["EM",{attrs:{"class":"zcslymsg-football"}}]]}],["LI",{attrs:{"data-category":"medicine"},child:[["EM",{attrs:{"class":"zcslymsg-first-aid-box"}}]]}],["LI",{attrs:{"data-category":"travel"},child:[["EM",{attrs:{"class":"zcslymsg-bus"}}]]}]]}]]}]),o={smiley:n.getElementsByClassName("zmsc_smiley")[0],celebration:n.getElementsByClassName("zmsc_celebration")[0],sports:n.getElementsByClassName("zmsc_sports")[0],medicine:n.getElementsByClassName("zmsc_medicine")[0],travel:n.getElementsByClassName("zmsc_travel")[0]};for(j in i)l=i[j]["class"],m=i[j].category,k.indexOf(l)===-1&&(k.push(l),o[m].appendChild(_zm.getDOM(["DIV",{attrs:{"data-text":j,title:a[l],"class":"smlynone"},child:[["DIV",{attrs:{"class":"zcsly-"+l}}]]}])));var p={par:g,showArrow:!0,liDom:[n],id:"zmsmiley",defaultclass:!1,ulClass:"noclass",direction:"right"};zmUtil.showMenu(p);var q=function(){var a=n.getElementsByClassName("smileyCateg")[0].getBoundingClientRect().height,b=$("#zm_dropDown").children("ul")[0],c=b.getBoundingClientRect().height-a;n.getElementsByClassName("smileydivmn")[0].style.height=c+"px",n.style.paddingBottom=a+5+"px"};zmUtil.stopEvents(h),$("#zm_dropDown .smileyCateg li").click(function(){$(this).siblings(".sel").removeClass("sel"),m=$(this).addClass("sel").data("category"),$("#zm_dropDown .zmsc_"+m).removeClass("SC_dyn").siblings().addClass("SC_dyn")}),$("#zm_dropDown .smlynone").click(function(a){f(c,this,a)}),q()},h=function(c){d||e();var f,g,h,i="";for(f in b)""!==i?i+="|"+f:i=f;i=i.replace(/\|-\)/g,"\\|-)"),i=i.replace(/[[\]()*+.?^]/g,function(a){return"\\"+a}),i="("+i+")";for(var j,k=new RegExp("(\\n|\\s|^)("+i+")+(?=[\\s<\\n]|$)","g"),l=[];null!==(j=k.exec(c));){if(g=$.trim(j[0])){h=b[g]["class"];var m="zcslymsg-"+h;l.push({from:j.index,to:k.lastIndex,type:"SMILEY",text:m,title:a[h]})}j.index===k.lastIndex&&k.lastIndex++}return l},i=c.create("zmSmiley");i.showList=g,i.replaceText=h,i.init=e}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractTrigger,e=/(?:^[:]{1}([^\d]*))/i,f=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"textChangeAction",value:function(){var a=this,b=a._input,c=b.getCurrentTypingWord();e.lastIndex=0;var d=e.exec(c);if(d){var f=d[0]||"";a.publishTriggerEvent({searchToken:f})}else a.publishNegativeTriggerEvent()}}]),b}(d);b.SmileyTrigger=f}(),function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractListItemModel,e=d.extend({defaults:{text:"",id:"","class":"",selected:!1}});b.SmileyListItemModel=e}(),function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractListModel,e=d.extend({selectDownItem:function(a){var b=this,c=b.getListItems();if(c.length){for(var d=a.offsetWidth,e=_zm(".","zcsimleys",a)[0].offsetWidth,f=Math.floor(d/e),g=0,h=null,i=0,j=c.length;i<j;i++)if(h=c[i],h.attributes.selected){g=i+f;break}g>=c.length&&(g=c.length-1),b.selectItem(c[g].attributes.id)}},selectUpItem:function(a){var b=this,c=b.getListItems();if(c.length){for(var d=a.offsetWidth,e=_zm(".","zcsimleys",a)[0].offsetWidth,f=Math.floor(d/e),g=0,h=null,i=0,j=c.length;i<j;i++)if(h=c[i],h.attributes.selected){g=i-f;break}g<0&&(g=0),b.selectItem(c[g].attributes.id)}}});b.SmileyListModel=e}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractDataProvider,e=zmStreamsApp.Smiley,f=e.SmileyListItemModel,g=function(){var a=zmSmiley.init();return a},h=zmText.get("smiley","smileys.tooltips"),i=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"searchData",value:function(a){var b=a.searchToken||"",c=g(),d=b.toLowerCase(),e=null,i=null;if(a=a||{},e=a.collection,i=a.deferred,!d)return void i.reject();var j,k=Object.keys(c),l=[];if(k&&k.length)for(var m in c)if(j=c[m]["class"],0===m.indexOf(d)&&l.indexOf(j)===-1){l.push(j);var n=new f({"class":j,id:m,text:h[j]});e.add(n)}i.resolve()}}]),b}(d);b.SmileyDataProvider=i}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractDataAccumulator,e=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"accumulateData",value:function(a){var b=this,c=a.collectionList;c.forEach(function(a){b.dataCollection.add(a.models)}),b.triggerAccumulationComplete()}}]),b}(d);b.SmileyDataAccumulator=e}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractListItemComponent,e={ITEM:['<div ref = "wrapper" class="zcsimleys" elemtype="smiley">','<div ref = "code" class="smlglst" purpose="search">','<em ref = "icon"></em>','<span ref = "text"></span>',"</div>","</div>"].join("")},f=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"getTemplate",value:function(){return e.ITEM}},{key:"render",value:function(a,b){var c=this;b=b||{},c._preRender(a),c.state.searchWord=b.searchWord||c.state.searchWord||"";var d=a.attributes,e="srchbn sel";c.state.selected?$(c.refs.code).addClass(e):$(c.refs.code).removeClass(e);var f=d.id;$(c.refs.code).attr({code:f});var g="zcslymsg-"+d["class"];$(c.refs.icon).addClass(g);var h=d.text;$(c.refs.text).text(h),c._postRender()}},{key:"focus",value:function(){var a=this,b=$(a.dom).parents(".smilyatdrpdwnmn")[0].getBoundingClientRect(),c=a.dom.getBoundingClientRect(),d=b.top>c.top,e=d||b.bottom<c.bottom;a.focusTimeoutID=setTimeout(function(){a._mounted&&($(a.refs.wrapper).focus(),e&&a.refs.wrapper.scrollIntoView(d))},0)}}]),b}(d);b.SmileyListItemComponent=f}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)};!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractListComponent,e={LIST:['<div ref="wrapper" class="SC_dd shw smilyatdrpdwnmn" style="max-width:780px; overflow: hidden; bottom: auto; height: auto; max-height:auto;">','<div ref="scrollWrapper" class="smilyatdrpdwn ps-container ps-theme-default ps-active-y">','<div ref="listWrapper" id="smileys" searchcatagory="smileys"></div>',"</div>","</div>"].join("")},f=c.Constants,g=f.KEYS,h={SELECT_UP:"selectUp",SELECT_DOWN:"selectDown",SELECT_NEXT:"selectNext",SELECT_PREVIOUS:"selectPrevious",ITEM_SELECTION:"itemSelection",ITEM_SELECTION_CURRENT:"itemSelectionCurrent"},i=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),c=a;return c.popUp=!0,a}return _inherits(b,a),_createClass(b,[{key:"getTemplate",value:function(){return e.LIST}},{key:"getScrollWrapperDOM",value:function(){var a=this;return a.refs.scrollWrapper}},{key:"handleListSpaceOverflow",value:function(a){var b=this;a=a||{};var c=b.getScrollWrapperDOM();$(c).css({height:a.height+"px"})}},{key:"positionComponent",value:function(a){var c=this,d=c.getScrollWrapperDOM();$(d).css({height:"auto"}),$(c.dom).css({height:_zm(".","smilyatdrpdwn",c.dom)[0].offsetHeight+"px"});var e=_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"positionComponent",this).call(this,a);return e}},{key:"selectUpListItem",value:function(){var a=this;$(a).triggerHandler(h.SELECT_UP)}},{key:"selectDownListItem",value:function(){var a=this;$(a).triggerHandler(h.SELECT_DOWN)}},{key:"_mouseDownHandler",value:function(){zmUtil.stopEvents();var a=this;a.mouseDown=!0}},{key:"_keyDownHandler",value:function(a,b){var c=this;b=b||{};var d=a.which||a.keyCode,e=!0,f=!1;switch(d){case g.LEFT:c.selectPreviousListItem();break;case g.RIGHT:c.selectNextListItem();break;case g.UP:c.selectUpListItem();break;case g.DOWN:c.selectDownListItem();break;case g.ENTER:f=c.choseCurrentSelectedItem(),a.ignoreKeyUp=!0,!f&&b.isProxyEvent&&(e=!1);break;default:e=!1}e&&(a.stopPropagation(),a.preventDefault())}},{key:"show",value:function(){var a=this;$(a.dom).addClass("shown").removeClass("hidden"),$(a.dom).css({visibility:"visible"}),a.visible=!0}},{key:"hide",value:function(){var a=this;$(a.dom).addClass("hidden").removeClass("shown"),$(a.dom).css({visibility:"hidden"}),a.visible=!1}}]),b}(d);i.EVENTS=h,b.SmileyListComponent=i}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractListItemComponentFactory,e=zmStreamsApp.Smiley,f=e.SmileyListItemComponent,g=e.SmileyListItemModel,h=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"createComponent",value:function(a){if(a instanceof g)return new f}}]),b}(d);b.SmileyListItemComponentFactory=h}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function b(a,c,d){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,c);if(void 0===e){var f=Object.getPrototypeOf(a);return null===f?void 0:b(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)};!function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.BaseHTMLEditableAutoCompleteSystem,e=c.System.AbstractHTMLTextArea,f=zmStreamsApp.Smiley,g=f.SmileyDataProvider,h=f.SmileyListComponent,i=f.SmileyListItemComponentFactory,j=f.SmileyTrigger,k=f.SmileyDataAccumulator,l=f.SmileyListModel,m=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"createUserInput",value:function(){return new e}},{key:"createDataProviders",value:function(){return[new g]}},{key:"createTrigger",value:function(){return new j}},{key:"createDataAccumulator",value:function(){return new k}},{key:"createListComponent",value:function(){return new h}},{key:"createListItemComponentFactory",value:function(){return new i}},{key:"createListModel",value:function(){return new l}},{key:"invokeDataProviderSearch",value:function(a){var b=this,c=b.dataProviders;b.dataAccumulator.dataCollection.reset(null),b.listModel.resetData(),b.listModel.set({currentSearchKey:a.searchToken}),c.forEach(function(b){b.getData({searchToken:a.searchToken,trigger:a.trigger})})}},{key:"showComponent",value:function(){var a=this,b=a.dataAccumulator.dataCollection,c=b.find(function(a){return a.attributes.selected});c&&c.set({selected:!1});var d=a.listComponent.dom;if(b.length){var e=a.userInput._element.getBoundingClientRect(),f=_zm(".","zcsimleys",d),g=f.length>5?5:f.length,h=f[0].offsetWidth,i=1===g?10:30,j=Math.floor(e.width/h);j=j<g?j:g;var k=h*j+i;k=k>e.width?780:k,$(d).css({width:k+"px"});var l,m=a.userInput.getListAnchorBounds();m.top-=a.userInput._element.scrollTop,m.bottom-=a.userInput._element.scrollTop,a.listComponent.positionComponent({anchorBounds:m});var n=d.getBoundingClientRect();Math.abs(m.right-e.right)<n.width&&(l=n.left+(e.right-n.right)+"px"),$(d).css({left:l}),a.listComponent.listItemComponents[0].model.set("selected",!0),a.listComponent.show()}}},{key:"_componentSelectUpHandler",value:function(){var a=this;a.listModel.selectUpItem(a.listComponent.dom);var b=a.listModel.getSelectedItem();b&&a.listItemFocusSelectAction({listItemModel:b})}},{key:"_componentSelectDownHandler",value:function(){var a=this;a.listModel.selectDownItem(a.listComponent.dom);var b=a.listModel.getSelectedItem();b&&a.listItemFocusSelectAction({listItemModel:b})}},{key:"bindEvents",value:function(){var a=this;a._componentSelectUpHandler=a._componentSelectUpHandler.bind(a),$(a.listComponent).on(h.EVENTS.SELECT_UP,a._componentSelectUpHandler),a._componentSelectDownHandler=a._componentSelectDownHandler.bind(a),$(a.listComponent).on(h.EVENTS.SELECT_DOWN,a._componentSelectDownHandler),_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"bindEvents",this).call(this)}},{key:"unbindEvents",value:function(){var a=this;$(a.listComponent).off(h.EVENTS.SELECT_UP,a._componentSelectUpHandler),$(a.listComponent).off(h.EVENTS.SELECT_DOWN,a._componentSelectDownHandler),_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"unbindEvents",this).call(this)}}]),b}(d);b.SmileyAutoCompleteSystem=m}(),function(){var a=zmail.Core.Namespaces,b=a.create("zmStreamsApp.Smiley"),c=zmail.Components.AutoComplete,d=c.System.AbstractAutoCompleteSystem,e=zmStreamsApp.Smiley,f=e.SmileyAutoCompleteSystem,g=function(a){a=a||{};var b=a.input,c=new f;return c.init({inputElement:b,parentDOM:document.body}),$(c).on(d.EVENTS.ITEM_SELECTED,a.onSelect),c};b.SmileyAutoComplete=g}();