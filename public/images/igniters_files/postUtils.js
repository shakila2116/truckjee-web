zmail.fileUploader=function(a){"use strict";var b=function(){var a={isAjaxable:!1,isUploadStatusNotifiable:!1,isProgessNotifiable:!1},b=new XMLHttpRequest;return window.FormData&&(a.isAjaxable=!0),b.upload&&(a.isUploadStatusNotifiable=!0,b.upload.onprogress&&(a.isProgessNotifiable=!0)),a}(),c=function(a){var b=$('<form method="POST" />');return a=a||[],a.forEach(function(a){var c=a.$el;c||(c=$('<input type="hidden"/>'),c.attr("name",a.name),c.val(a.value)),b.append(c)}),b},d=function(a){var b=new FormData;return a=a||[],a.forEach(function(a){a.optional?b.append(a.name,a.value,a.optional):b.append(a.name,a.value)}),b},e=function(a){var b,d=$.Deferred(),e=$("body"),f=$('<iframe style="display:none" />'),g=f[0],h=c(a.payloads||[]),i=h[0],j="asyncUpld"+(new Date).getTime();return e.append(f),b=g.contentWindow&&g.contentWindow.document||g.contentDocument||g.document,g.name=j,i.target=g.name,i.action=a.url||[],i.enctype="multipart/form-data",i.encoding="multipart/form-data",f.on("load",function(){var a=b.body,c=a.innerText||a.textContent,e=$.parseJSON(c)||[],g=Number(e[0]);1===g?d.resolve(e):d.reject(e),f.remove(),h.remove()}),e.append(h),i.submit(),d.promise()},f=function(a){var b=d(a.payloads);return $.ajax({url:a.url,type:"POST",data:b,processData:!1,contentType:!1}).done(function(a){window.console.log(a)}).done(function(a){})},g=function(a){return b.isAjaxable?f(a):e(a)};return a.flags=b,a.upload=g,a}(zmail.fileUploader||{}),window.zmail=window.zmail||{},window.zmail.masonry=function(){"use strict";var a=function(a,b,c,d){for(;b<c;b++)a[b]=d},b=function(a){for(var b=0,c=a[0],d=a.length,e=1;e<d;e++)c>a[e]&&(c=a[e],b=e);return{index:b,value:c}},c=function(c){c.$container=$(c.container),c.containerSize=c.containerSize||c.$container.width(),c.containerPadding=c.containerPadding||0,c.childrenSelector=c.childrenSelector||"",c.children=c.children||c.$container.find(c.childrenSelector),c.childrenWidth=Number(c.childrenWidth),c.childrenVMargin=Number(c.childrenVMargin)||0,c.childrenHMargin=Number(c.childrenHMargin)||0,c.leftUnit="px",c.topUnit="px",c.heights=[],c.containerSize-=c.containerPadding,c.columns=c.columns||Math.floor(c.containerSize/(c.childrenWidth+c.childrenHMargin))||1,a(c.heights,0,c.columns,0),c.extraWidth=Math.floor(c.containerSize-(c.columns*c.childrenWidth+(c.columns-1)*c.childrenHMargin)),c.extraWidth>c.childrenWidth+c.childrenHMargin&&(c.columns+=1,c.heights.push(0),c.extraWidth=Math.floor(c.containerSize-(c.columns*c.childrenWidth+(c.columns-1)*c.childrenHMargin))),c.before&&c.before(c),_(c.children).each(function(a){a=$(a);var d=b(c.heights),e=d.index,f=e*c.childrenWidth+e*c.childrenHMargin,g=d.value;c.centerAlign&&(f+=c.extraWidth/2),a.css({left:f+c.leftUnit,top:g+c.topUnit}),c.heights[e]+=a.outerHeight()+c.childrenVMargin}),c.after&&c.after(c)};return c}(),window.zmshCut=function(a){"use strict";var b={"shift+1":"!","shift+2":"@","shift+3":"#","shift+4":"$","shift+5":"%","shift+6":"^","shift+7":"&","shift+8":"","shift+9":"(","shift+0":")","shift+openBracket":"{","shift+closeBracket":"}","shift+backSlash":"|","shift+backtick":"~","shift+singleQuote":'"',"shift+semiColon":":","shift+equalTo":"+","shift+minus":"_",upArrow:"↑",downArrow:"↓",leftArrow:"←",rightArrow:"→",forwardSlash:"/",backSlash:"\\",openBracket:"[",closeBracket:"]",backtick:"`",singleQuote:"'",semiColon:";",period:".",comma:",",equalTo:"=",minus:"-",ctrl:"<Ctrl>",shift:"<Shift>",enter:"<Enter>","delete":"<Delete>",esc:"<Esc>"},c=function(a){return b[a]||a.toLowerCase()},d=function(a,c){return b[a+c]},e=function(a){var b,e=a.split("+"),f=e.length,g=[],h="";for(b=0;b<f;b++)h=d(e[b],e[b+1]),h?(g.push(h),b+=1):g.push(c(e[b]));return g},f=function(a){var b=a.split("/"),c=[];return b.forEach(function(a){c.push(e(a))}),_.flatten(c)},g=function(a,b){var c,d=zmshCut[a];return _.isArray(d)&&(c=_(d).find(function(a){return a.uid===b})),c&&c.keyStr};return a.getReadableText=f,a.getKeyString=g,a}(window.zmshCut||{}),zmail.attachmentReminder=function(a){"use strict";var b=function(a,b){this.message=a,this.object=b},c=function(a,b){for(var c="",d=0,e=a.length;d<e;d++){var f=a[d];f&&(c&&(c+=b),c+=f)}return c},d={pronoun:["i","we"],auxVerb:["'ve"," have"],actionVerb:["find","see","download","check","go through","refer"],article:["the","my"],mainActionVerb:["attached","included","enclosed"],adVerb:["here","hereby","herewith","herein"],mainNoun:["attachments?"],noun:["files?","images?","pictures?","photos?","resumes?","copy","copies","docs?","documents?","papers?","emails?","spreadsheets?","pdfs?"],prepositions:["in","this"]},e=!1,f=null,g=["attachments? has","attached it for your reference","PFA"],h=!1,i=null,j=function(){return!h&&i||(h=!1,i=new RegExp("\\s(?:"+c(g,"|")+")\\s","i")),i},k=function(){var a="|";if(e||!f){e=!1;var b,g=d;b="(?:",b+="(?:",b+="(?:",b+="(?:\\b(?:"+c(g.pronoun,a)+"))",b+="(?:\\s*(?:"+c(g.auxVerb,a)+"))?",b+=")",b+="|",b+="(?:",b+="(?:\\b(?:"+c(g.actionVerb,a)+"))",b+="(?:\\s+(?:"+c(g.prepositions,a)+"))?",b+="(?:\\s+(?:"+c(g.article,a)+"))?",b+=")",b+=")",b+="(?:\\b\\s*(?:"+c(g.mainNoun,a)+"|"+c(g.mainActionVerb,a)+")\\b)",b+="(?:\\s+(?:"+c(g.article,a)+"))?",b+="(?:\\s+(?:"+c(g.noun,a)+")\\b)?",b+=")",b+="|",b+="(?:",b+="(?:\\b\\s*(?:"+g.mainActionVerb.join("|")+")\\b)",b+="(?:it)?",b+="(?:",b+="(?:\\s+(?:"+c(g.adVerb,a)+")\\b)",b+="|",b+="(?:",b+="(?:\\s+(?:"+c(g.prepositions,a)+"))?",b+="(?:\\s+(?:this|"+c(g.article,a)+"))?",b+="(?:\\s+(?:"+c(g.noun,a)+")\\b)",b+=")",b+=")",b+=")",b+="|",b+="(?:",b+="(?:",b+="(?:\\b(?:"+c(g.noun,a)+")\\b)",b+="|",b+="(?:\\b(?:"+c(g.adVerb,a)+")\\b)",b+=")",b+="(?:\\s*(?:"+c(g.mainActionVerb,a)+")\\b)",b+=")",f=new RegExp(b,"i")}return f},l=function(a){for(var b=[],c=/[|`~!@#$%^&*()\-_+={}[\]\\:;",<>\/]/,d=null,e=0,f=a.length;e<f;e++)d=c.exec(a[e]),d&&b.push(d);return b},m=function(a){var b=[];for(var c in a){var d=l(a[c]);d.length&&b.push(d)}return b};return Object.defineProperty(a,"filter",{get:function(){return d},set:function(a){var c=m(a);if(c.length)throw new b("Filter contains special characters",c);d=a,e=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a,"userPhrases",{get:function(){return g},set:function(a){var c=l(a);if(c.length)throw new b("User phrases contains special characters",c);g=a,h=!0},enumerable:!0,configurable:!0}),a.isFileNeedToAttach=function(a){var b=null;return b=k().exec(a),!b&&g.length&&(b=j().exec(" "+a+" ")),b},zmail.win.zmAttReminder=a,a}(zmail.attachmentReminder||{}),function(a){"use strict";a.call(zmail.Core.Namespaces.create("zmail"),zmail.Core.Namespaces.get)}(function(a){"use strict";var b=a("_"),c=a("$.when"),d=a("$.Deferred"),e=function(a){return this instanceof e?(b.extend(this,this.defaults(),a),void(this.setResult=this.setResult.bind(this))):new e(a)};this.Paginator=e,e.prototype={defaults:function(){return{pageSize:10,pageNo:0,pending:0,threshold:30,hasMoreToFetch:!0,query:void 0,expected:0,result:[],provider:function(a){return a.result}}},isFirstPage:function(){return 1===this.pageNo},resetPage:function(){return this.pageNo=0,this.hasMoreToFetch=!0,this},reset:function(){return this.resetPage(),this.pending=0,this.query=void 0,this.expected=0,this.result=[],this},setResult:function(a){return this.result=a||[],this.hasMoreToFetch=this.result.length>=this.expected,this},isQueryChanged:function(a){return void 0!==a&&this.query!==a},setQuery:function(a){return this.isQueryChanged(a)&&(this.reset(),this.query=a),this},setPending:function(a){return this.pending=this.pageSize-a.length,this},setNextPage:function(){return this.pageNo+=1,this},getLastServedIndex:function(){var a=this.pageSize*this.pageNo;return a-=this.pending,a=a<0?0:a},getEndIndex:function(a){var b=a+this.pageSize;return this.endIndex>this.result.length&&(b=this.result.length-1),b=b<=0?1:b},getResultSubSet:function(){var a=this.getLastServedIndex();return this.result.slice(a,this.getEndIndex(a))},fetch:function(){return b.isFunction(this.provider)?(this.expected=(this.pageNo+1)*this.pageSize,c(this.provider(this)).then(this.setResult)):c(this.provider).then(this.setResult)},isMoreThanThreshold:function(a){var b=a.length/this.pageSize*100;return b>=this.threshold},next:function(a){this.setQuery(a);var b=new d,c=this.getResultSubSet();if(this.hasMoreToFetch&&!this.isMoreThanThreshold(c)){var e=this;this.fetch().then(function(){c=e.getResultSubSet(),e.setNextPage().setPending(c),b.resolve(c,e.isFirstPage())},b.reject)}else this.setNextPage().setPending(c),b.resolve(c,this.isFirstPage());return b.promise()}}}),function(a){"use strict";a.call(zmail.Core.Namespaces.create("zmail"),zmail.Core.Namespaces.get)}(function(a){"use strict";var b=a("_"),c=function(a){return this instanceof c?(b.extend(this,this.defaults(),a),this.resetIndex(),void delete this.defaults):new c(a)};this.Traverser=c,c.prototype={defaults:function(){return{list:[],startIndex:-1,index:-1}},add:function(a){return this.list&&this.list.push(a),this},remove:function(a){if(this.list){var b=this.list.indexOf(a);b!==-1&&(this.list.splice(b,1),this.index===b&&this.resetIndex())}return this},set:function(a){return b.extend(this,a),this},setIndexOf:function(a){var b=this.list.indexOf(a);return b!==-1?this.index=b:this.resetIndex(),this},resetIndex:function(){return this.index=this.startIndex,this},reset:function(){return this.list=void 0,this.resetIndex()},value:function(){return this.list[this.index]},next:function(){return this.list&&(this.index+=1,this.index>=this.list.length&&(this.index=0)),this},previous:function(){return this.list&&(this.index-=1,this.index<0&&(this.index=this.list.length-1)),this},traverse:function(a){return a===-1?this.previous():this.next()},first:function(){return this.list&&this.list.length>0&&(this.index=0),this},last:function(){return this.list&&this.list.length>0&&(this.index=this.list.length-1),this}}});